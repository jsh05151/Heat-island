<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIoT ë°ì´í„° ë¶„ì„ í”Œë«í¼</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --dark-bg-start: #0f172a;
            --dark-bg-end: #1e293b;
            --card-bg: rgba(30, 41, 59, 0.8);
            --border-color: rgba(148, 163, 184, 0.2);
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent-cyan: #22d3ee;
            --accent-green: #10b981;
            --accent-purple: #a855f7;
            --accent-red: #ef4444;
            --accent-orange: #f59e0b;
            --accent-yellow: #fbbf24;
            --white: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, var(--dark-bg-start) 0%, var(--dark-bg-end) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 2rem;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: block;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .logo {
            width: 150px;
            height: auto;
            margin: 0 auto 1rem;
            display: block;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-green) 50%, var(--accent-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .tab-button {
            background: var(--card-bg);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background: rgba(30, 41, 59, 1);
            border-color: var(--accent-cyan);
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-green) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 14px -1px rgba(34, 211, 238, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .selection-section {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        /* 3ì—´ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
        .csv-analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.5rem;
        }

        /* 3ì—´ ê·¸ë¦¬ë“œ ë‚´ë¶€ì˜ ê° íŒ¨ë„ */
        .analysis-panel {
            display: flex;
            flex-direction: column;
            gap: 1.5rem; /* ë“œë¡­ë‹¤ìš´, ì´ë¯¸ì§€, ì„¤ëª… ê°„ì˜ ê°„ê²© */
        }

        .selection-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .selection-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .selection-dropdown {
            width: 100%;
            background: rgba(15, 23, 42, 0.8);
            color: var(--text-primary);
            border: 1px solid #475569;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .selection-dropdown:hover {
            border-color: var(--accent-cyan);
        }

        .selection-dropdown:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.1);
        }

        /* flex-growê°€ ì œê±°ë¨ */
        .model-image-panel, .model-description-panel {
            background: rgba(15, 23, 42, 0.8); /* ì–´ë‘ìš´ ì¹´ë“œ ë°°ê²½ */
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }
        
        /* ì„¤ëª… íŒ¨ë„ë§Œ flex-growë¥¼ ê°€ì§ */
        .model-description-panel {
             display: flex;
             flex-direction: column;
             flex-grow: 1; /* ì„¤ëª… íŒ¨ë„ì´ ë‚¨ëŠ” ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€ */
        }

        .model-image {
            width: 100%;
            height: 200px; /* ì´ë¯¸ì§€ ë†’ì´ ê³ ì • */
            border-radius: 8px;
            object-fit: cover;
        }
        .model-desc-line {
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        .model-desc-label {
            font-weight: 600;
            color: var(--text-secondary);
            display: block; /* ë¼ë²¨ì„ ìœ„ë¡œ ì˜¬ë¦¼ */
            margin-bottom: 0.25rem;
        }
        .model-desc-content {
            color: var(--text-primary);
            line-height: 1.5;
            /* í…ìŠ¤íŠ¸ê°€ ê¸¸ì–´ì§€ë©´ ì¤„ë°”ê¿ˆ */
            word-break: keep-all; 
            overflow-wrap: break-word;
        }
        .model-desc-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            /* ì œëª© ë†’ì´ë¥¼ ì¼ì •í•˜ê²Œ ìœ ì§€í•˜ê¸° ìœ„í•´ ìµœì†Œ ë†’ì´ ì„¤ì • */
            min-height: 2.2rem;
        }


        .chart-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            height: 450px;
            display: flex;
            flex-direction: column;
        }

        .chart-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .stats-table {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .stats-header {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .stats-content table {
            width: 100%;
            border-collapse: collapse;
        }

        .stats-content th, .stats-content td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #475569;
        }

        .stats-content th {
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.875rem;
        }

        .simulator-container { display: grid; gap: 2rem; } /* [ìˆ˜ì •] .comparison-simulator ì œê±° */
        .simulator-container { grid-template-columns: 30% 70%; }
        .control-panel, .display-panel {
             background: var(--card-bg); border-radius: 16px; padding: 2rem;
        }
        .dropdown-label { font-size: 0.875rem; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.75rem; display: block; }
        .dropdown { width: 100%; background: rgba(15, 23, 42, 0.8); color: var(--text-primary); border: 1px solid #475569; padding: 0.75rem 1rem; border-radius: 8px; font-size: 1rem; cursor: pointer; }
        .temperature-display { border-radius: 12px; padding: 2rem; text-align: center; margin-top: 1rem; transition: background 0.5s ease;}
        .temperature-label { font-size: 0.875rem; color: var(--text-secondary); font-weight: 600; }
        .temperature-value { font-size: 3rem; font-weight: 700; transition: color 0.5s ease; }
        
        /* [ì‚­ì œ] ë¹„êµ ëª¨ë“œ ê´€ë ¨ CSS ì œê±° */
        
        .display-image { max-width: 100%; max-height: 500px; border-radius: 8px; cursor: pointer; transition: opacity 0.5s ease; }

        .image-gallery { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; display: none; align-items: center; justify-content: center; }
        .gallery-overlay { position: absolute; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); }
        .gallery-content { position: relative; max-width: 80vw; max-height: 80vh; }
        .gallery-image { max-width: 100%; max-height: 80vh; border-radius: 12px; }
        .gallery-close, .gallery-nav { position: absolute; background: rgba(30, 41, 59, 0.8); color: white; border: 1px solid var(--accent-cyan); width: 50px; height: 50px; border-radius: 50%; font-size: 24px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .gallery-close { top: -25px; right: -25px; }
        .gallery-nav { top: 50%; transform: translateY(-50%); }
        .gallery-prev { left: -70px; }
        .gallery-next { right: -70px; }
        .gallery-info { position: absolute; bottom: -80px; left: 50%; transform: translateX(-50%); background: var(--card-bg); padding: 1rem 2rem; border-radius: 8px; text-align: center; }
        .gallery-title { font-size: 1.2rem; }
        .gallery-temp { font-size: 1.5rem; font-weight: bold; color: var(--accent-cyan); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (max-width: 1024px) {
            .simulator-container { grid-template-columns: 1fr; }
            /* [ì‚­ì œ] .comparison-simulator { ... } ì œê±° */
            .gallery-nav { display: none; }
            
            /* 3ì—´ ê·¸ë¦¬ë“œ ëª¨ë°”ì¼ ëŒ€ì‘ (1ì—´ë¡œ ìŠ¤íƒ) */
            .csv-analysis-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="img/logo.png" alt="SIoT Logo" class="logo">
            <h1>ë„ì‹œ ì—´ì„¬í˜„ìƒ í•´ê²° ì‹œë®¬ë ˆì´í„°</h1>
            <p class="subtitle">Future Science High School - ë„ì‹œ ì—´ì„¬ í˜„ìƒ ì—°êµ¬</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('csv')">ë„ì‹œ ëª¨ë¸ ì˜¨ë„ ì‹œë®¬ë ˆì´í„°</button>
            <button class="tab-button" onclick="switchTab('simulator')">ì˜¨ë„ ë³€í™” ê·¸ë˜í”„</button>
        </div>

        <div id="csvTab" class="tab-content active">
            <div class="selection-section">
                
                <div class="csv-analysis-grid">

                    <div class="analysis-panel">
                        <div class="selection-item">
                            <label class="selection-label">ëª¨ë¸ 1</label>
                            <select class="selection-dropdown" id="data1Select" onchange="onDropdownChange(1)">
                                <option value="model1" selected>ë„ì‹œ ëª¨ë¸ 1</option>
                                <option value="model2">ë„ì‹œ ëª¨ë¸ 2</option>
                                <option value="model3">ë„ì‹œ ëª¨ë¸ 3</option>
                                <option value="">ì„ íƒ ì•ˆ í•¨</option>
                            </select>
                        </div>
                        <div class="model-image-panel">
                            <img src="img/model1.png" alt="ëª¨ë¸ 1 ì´ë¯¸ì§€" id="modelImage1" class="model-image">
                        </div>
                        <div class="model-description-panel">
                            <div class="model-desc-title" id="modelDescTitle1">ëª¨ë¸ êµ¬ì„±</div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ì™¸ì¥ì¬:</span>
                                <span id="modelDescExterior1" class="model-desc-content">-</span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë°”ë‹¥ì¬:</span>
                                <span id="modelDescPavement1" class="model-desc-content">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-panel">
                        <div class="selection-item">
                            <label class="selection-label">ëª¨ë¸ 2</label>
                            <select class="selection-dropdown" id="data2Select" onchange="onDropdownChange(2)">
                                <option value="">ì„ íƒ ì•ˆ í•¨</option>
                                <option value="model1">ë„ì‹œ ëª¨ë¸ 1</option>
                                <option value="model2" selected>ë„ì‹œ ëª¨ë¸ 2</option>
                                <option value="model3">ë„ì‹œ ëª¨ë¸ 3</option>
                            </select>
                        </div>
                        <div class="model-image-panel">
                            <img src="img/model2.png" alt="ëª¨ë¸ 2 ì´ë¯¸ì§€" id="modelImage2" class="model-image">
                        </div>
                        <div class="model-description-panel">
                            <div class="model-desc-title" id="modelDescTitle2">ëª¨ë¸ êµ¬ì„±</div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ì™¸ì¥ì¬:</span>
                                <span id="modelDescExterior2" class="model-desc-content">-</span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë°”ë‹¥ì¬:</span>
                                <span id="modelDescPavement2" class="model-desc-content">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="analysis-panel">
                        <div class="selection-item">
                            <label class="selection-label">ëª¨ë¸ 3</label>
                            <select class="selection-dropdown" id="data3Select" onchange="onDropdownChange(3)">
                                <option value="">ì„ íƒ ì•ˆ í•¨</option>
                                <option value="model1">ë„ì‹œ ëª¨ë¸ 1</option>
                                <option value="model2">ë„ì‹œ ëª¨ë¸ 2</option>
                                <option value="model3" selected>ë„ì‹œ ëª¨ë¸ 3</option>
                            </select>
                        </div>
                        <div class="model-image-panel">
                            <img src="img/model3.png" alt="ëª¨ë¸ 3 ì´ë¯¸ì§€" id="modelImage3" class="model-image">
                        </div>
                        <div class="model-description-panel">
                            <div class="model-desc-title" id="modelDescTitle3">ëª¨ë¸ êµ¬ì„±</div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ì™¸ì¥ì¬:</span>
                                <span id="modelDescExterior3" class="model-desc-content">-</span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë°”ë‹¥ì¬:</span>
                                <span id="modelDescPavement3" class="model-desc-content">-</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div id="statsTable" class="stats-table" style="display:none;">
                <div class="stats-header">ğŸ“Š í†µê³„ ìš”ì•½</div>
                <div class="stats-content"></div>
            </div>

            <div id="chartsContainer"></div>
        </div>
        <div id="simulatorTab" class="tab-content">
            
            <div id="singleSimulator" class="simulator-container">
                <div class="control-panel">
                     <div class="dropdown-section">
                        <label class="dropdown-label">ê±´ì¶• ì™¸ì¥ì¬</label>
                        <select class="dropdown" id="option1" onchange="updateSimulator()">
                            <option value="ì‹œë©˜íŠ¸">ì‹œë©˜íŠ¸</option>
                            <option value="ëŒ€ë¦¬ì„">ëŒ€ë¦¬ì„</option>
                            <option value="ìœ ë¦¬">ìœ ë¦¬</option>
                            <option value="ì§•í¬íŒ¨ë„">ì§•í¬íŒ¨ë„</option>
                        </select>
                    </div>
                    <div class="dropdown-section">
                        <label class="dropdown-label">ë„ë¡œ í¬ì¥ì¬</label>
                        <select class="dropdown" id="option2" onchange="updateSimulator()">
                            <option value="ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)">ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)</option>
                            <option value="ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)">ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)</option>
                            <option value="íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸">íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸</option>
                        </select>
                    </div>
                    <div id="tempDisplay" class="temperature-display">
                        <div class="temperature-label">ì˜ˆìƒ ì˜¨ë„</div>
                        <div class="temperature-value" id="temperatureValue">25.0Â°C</div>
                    </div>
                </div>
                <div class="display-panel">
                    <img id="displayImage" src="img/wwo.png" alt="ì‹œë©˜íŠ¸-ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)" class="display-image">
                </div>
            </div>

            </div>
        </div>
    
    <div id="imageGallery" class="image-gallery">
        <div class="gallery-overlay" onclick="closeGallery()"></div>
        <div class="gallery-content">
            <button class="gallery-close" onclick="closeGallery()">Ã—</button>
            <button class="gallery-nav gallery-prev" onclick="navigateGallery(-1)">â€¹</button>
            <img id="galleryImage" class="gallery-image" src="img/wwo.png" alt="Gallery image">
            <button class="gallery-nav gallery-next" onclick="navigateGallery(1)">â€º</button>
            <div class="gallery-info">
                <div id="galleryTitle" class="gallery-title"></div>
                <div id="galleryTemp" class="gallery-temp"></div>
            </div>
        </div>
    </div>

    <script>
        // 'ë„ì‹œ ëª¨ë¸ 1, 2, 3' ë°ì´í„°
        const csvDataLibrary = {
            'model1': `Time,T,H
Time,T,H
?ã…½ì‘ 1:32:00,30,40
?ã…½ì‘ 1:36:31,30,40
?ã…½ì‘ 1:41:14,32,40
?ã…½ì‘ 1:45:58,34,40
?ã…½ì‘ 1:50:43,30,40
?ã…½ì‘ 1:55:21,33,40
?ã…½ì‘ 2:00:05,33,40
?ã…½ì‘ 2:04:48,34,40
?ã…½ì‘ 2:09:32,35,40
?ã…½ì‘ 2:14:15,34,40
?ã…½ì‘ 2:18:59,32,40
?ã…½ì‘ 2:23:43,32,41
?ã…½ì‘ 2:28:27,32,40
?ã…½ì‘ 2:33:11,33,40
?ã…½ì‘ 2:37:55,33,41
?ã…½ì‘ 2:42:39,32,41
?ã…½ì‘ 2:47:23,32,41
?ã…½ì‘ 2:52:02,30,42
?ã…½ì‘ 2:56:44,32,42
?ã…½ì‘ 3:01:27,33,40
?ã…½ì‘ 3:06:11,33,41
?ã…½ì‘ 3:10:55,33,41
?ã…½ì‘ 3:15:39,33,40
?ã…½ì‘ 3:20:17,30,43
?ã…½ì‘ 3:25:00,31,42
?ã…½ì‘ 3:29:19,30,43
?ã…½ì‘ 3:34:03,31,41
?ã…½ì‘ 3:38:46,31,42
?ã…½ì‘ 3:43:25,30,42
?ã…½ì‘ 3:48:00,30,42
?ã…½ì‘ 3:52:40,30,42
?ã…½ì‘ 3:57:15,29,42
?ã…½ì‘ 4:00:44,29,43
?ã…½ì‘ 4:04:13,28,44
?ã…½ì‘ 4:07:40,28,44
?ã…½ì‘ 4:11:08,29,44
?ã…½ì‘ 4:14:36,29,43
?ã…½ì‘ 4:18:13,29,43
?ã…½ì‘ 4:21:44,29,43
?ã…½ì‘ 4:25:15,29,43
?ã…½ì‘ 4:28:44,28,44
?ã…½ì‘ 4:32:10,28,44
?ã…½ì‘ 4:35:38,28,45
?ã…½ì‘ 4:39:02,28,44
?ã…½ì‘ 4:42:27,26,46
?ã…½ì‘ 4:45:53,26,48
`,
            'model2': `Time,T,H
?ã…½ì‘ 1:32:00,30,40
?ã…½ì‘ 1:36:31,29,38
?ã…½ì‘ 1:41:14,30,37
?ã…½ì‘ 1:45:58,30,39
?ã…½ì‘ 1:50:43,28,39
?ã…½ì‘ 1:55:21,28,41
?ã…½ì‘ 2:00:05,31,39
?ã…½ì‘ 2:04:48,31,38
?ã…½ì‘ 2:09:32,32,38
?ã…½ì‘ 2:14:15,32,36
?ã…½ì‘ 2:18:59,31,36
?ã…½ì‘ 2:23:43,30,37
?ã…½ì‘ 2:28:27,29,38
?ã…½ì‘ 2:33:11,29,38
?ã…½ì‘ 2:37:55,29,38
?ã…½ì‘ 2:42:39,29,38
?ã…½ì‘ 2:47:23,29,40
?ã…½ì‘ 2:52:02,28,41
?ã…½ì‘ 2:56:44,29,41
?ã…½ì‘ 3:01:27,27,41
?ã…½ì‘ 3:06:11,28,43
?ã…½ì‘ 3:10:55,29,41
?ã…½ì‘ 3:15:39,30,40
?ã…½ì‘ 3:20:17,29,41
?ã…½ì‘ 3:25:00,29,40
?ã…½ì‘ 3:29:19,29,41
?ã…½ì‘ 3:34:03,28,43
?ã…½ì‘ 3:38:46,27,41
?ã…½ì‘ 3:43:25,27,43
?ã…½ì‘ 3:48:00,27,43
?ã…½ì‘ 3:52:40,28,42
?ã…½ì‘ 3:57:15,27,43
?ã…½ì‘ 4:00:44,26,44
?ã…½ì‘ 4:04:13,26,45
?ã…½ì‘ 4:07:40,26,44
?ã…½ì‘ 4:11:08,26,44
?ã…½ì‘ 4:14:36,26,45
?ã…½ì‘ 4:18:13,25,47
?ã…½ì‘ 4:21:44,25,48
?ã…½ì‘ 4:25:15,25,48
?ã…½ì‘ 4:28:44,25,48
?ã…½ì‘ 4:32:10,25,49
?ã…½ì‘ 4:35:38,25,49
?ã…½ì‘ 4:39:02,25,49
?ã…½ì‘ 4:42:27,24,50
?ã…½ì‘ 4:45:53,23,52
`,
            'model3': `Time,T,H
Time,T,H
Time,City_Temperature_Predicted,City_Humidity_Predicted
ì˜¤í›„ 1:32:00,29,42
ì˜¤í›„ 1:36:31,28,40
ì˜¤í›„ 1:41:14,29,40
ì˜¤í›„ 1:45:58,29,42
ì˜¤í›„ 1:50:43,27,43
ì˜¤í›„ 1:55:21,27,44
ì˜¤í›„ 2:00:05,30,42
ì˜¤í›„ 2:04:48,30,41
ì˜¤í›„ 2:09:32,31,41
ì˜¤í›„ 2:14:15,31,39
ì˜¤í›„ 2:18:59,31,39
ì˜¤í›„ 2:23:43,29,40
ì˜¤í›„ 2:28:27,29,40
ì˜¤í›„ 2:33:11,29,40
ì˜¤í›„ 2:37:55,29,40
ì˜¤í›„ 2:42:39,29,40
ì˜¤í›„ 2:47:23,29,43
ì˜¤í›„ 2:52:02,27,45
ì˜¤í›„ 2:56:44,28,43
ì˜¤í›„ 3:01:27,27,44
ì˜¤í›„ 3:06:11,27,46
ì˜¤í›„ 3:10:55,29,43
ì˜¤í›„ 3:15:39,29,43
ì˜¤í›„ 3:20:17,28,43
ì˜¤í›„ 3:25:00,28,42
ì˜¤í›„ 3:29:19,28,43
ì˜¤í›„ 3:34:03,27,45
ì˜¤í›„ 3:38:46,27,43
ì˜¤í›„ 3:43:25,26,45
ì˜¤í›„ 3:48:00,27,45
ì˜¤í›„ 3:52:40,27,44
ì˜¤í›„ 3:57:15,26,46
ì˜¤í›„ 4:00:44,26,47
ì˜¤í›„ 4:04:13,25,47
ì˜¤í›„ 4:07:40,26,46
ì˜¤í›„ 4:11:08,26,46
ì˜¤í›„ 4:14:36,25,47
ì˜¤í›„ 4:18:13,24,49
ì˜¤í›„ 4:21:44,24,51
ì˜¤í›„ 4:25:15,24,51
ì˜¤í›„ 4:28:44,24,51
ì˜¤í›„ 4:32:10,24,52
ì˜¤í›„ 4:35:38,24,52
ì˜¤í›„ 4:39:02,24,51
ì˜¤í›„ 4:42:27,24,52
ì˜¤í›„ 4:45:53,22,55
`
        };

        // ëª¨ë¸ë³„ ì„¤ëª… ë°ì´í„°
        const modelDescriptionData = {
            'model1': {
                exterior: 'ëŒ€ë¦¬ì„ 70%, ì‹œë©˜íŠ¸ 30%',
                pavement: 'ì¼ë°˜ ì•„ìŠ¤íŒ”íŠ¸ 100%'
            },
            'model2': {
                exterior: 'ìœ ë¦¬ 26.79%, ì‹œë©˜íŠ¸ 25.64%, íŒ¨ë„ 24.29%, ëŒ€ë¦¬ì„ 23.27%',
                pavement: 'ì¼ë°˜ ì•„ìŠ¤íŒ”íŠ¸ 35.9%, íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸ 64.1%'
            },
            'model3': {
                exterior: 'ìœ ë¦¬ 26.79%, ì‹œë©˜íŠ¸ 25.64%, íŒ¨ë„ 24.29%, ëŒ€ë¦¬ì„ 23.27%',
                pavement: 'íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸ 38.79%, ì•„ìŠ¤íŒ”íŠ¸ ì¼ë°˜ 31.84%, ì•„ìŠ¤íŒ”íŠ¸ ë¬¼ 29.37%'
            }
        };

        // CSV íƒ­ì˜ ëª¨ë¸ ì´ë¯¸ì§€ ê²½ë¡œ
        const modelImageData = {
            'model1': 'img/model1.png',
            'model2': 'img/model2.png',
            'model3': 'img/model3.png'
        };

        // ìƒˆ ëª¨ë¸ì— ë§ê²Œ ìƒ‰ìƒ ì§€ì •
        const dataColors = {
            'model1': { border: 'rgba(34, 211, 238, 0.8)', bg: 'rgba(34, 211, 238, 0.2)' }, // Cyan
            'model2': { border: 'rgba(16, 185, 129, 0.8)', bg: 'rgba(16, 185, 129, 0.2)' }, // Green
            'model3': { border: 'rgba(168, 85, 247, 0.8)', bg: 'rgba(168, 85, 247, 0.2)' }  // Purple
        };

        // ìƒˆ ëª¨ë¸ì— ë§ê²Œ ì´ë¦„ ì§€ì •
        const dataNames = {
            'model1': 'ë„ì‹œ ëª¨ë¸ 1',
            'model2': 'ë„ì‹œ ëª¨ë¸ 2',
            'model3': 'ë„ì‹œ ëª¨ë¸ 3'
        };

        let parsedDataLibrary = {};
        
        // CSV íƒ­ì˜ ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°°ì—´ë¡œ ê´€ë¦¬
        let csvChartInstances = []; 

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`${tabName}Tab`).classList.add('active');
            document.querySelector(`.tab-button[onclick="switchTab('${tabName}')"]`).classList.add('active');
        }
        
        // --- CSV ë°ì´í„° ë¶„ì„ íƒ­ ---

        function onDropdownChange(index) {
            const modelKey = document.getElementById(`data${index}Select`).value;
            updatePanelContent(index, modelKey);
            updateCharts();
        }

        function updatePanelContent(index, modelKey) {
            const imgEl = document.getElementById(`modelImage${index}`);
            const titleEl = document.getElementById(`modelDescTitle${index}`);
            const exteriorEl = document.getElementById(`modelDescExterior${index}`);
            const pavementEl = document.getElementById(`modelDescPavement${index}`);
            
            const descData = modelDescriptionData[modelKey];
            const imgPath = modelImageData[modelKey]; // ì´ë¯¸ì§€ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°
            
            if (descData && imgPath) {
                imgEl.src = imgPath; 
                titleEl.textContent = `ëª¨ë¸ êµ¬ì„± (${dataNames[modelKey]})`;
                exteriorEl.textContent = descData.exterior;
                pavementEl.textContent = descData.pavement;
            } else {
                imgEl.src = 'https://placehold.co/600x400/1e293b/94a3b8?text=Image+Not+Found'; // ê¸°ë³¸ ì´ë¯¸ì§€
                titleEl.textContent = 'ëª¨ë¸ êµ¬ì„±';
                exteriorEl.textContent = '-';
                pavementEl.textContent = '-';
            }
        }

        // 'Time,T,H' íŒŒì„œ (ìŠµë„ í¬í•¨)
        function parseCSV(csvText) {
            const lines = csvText.trim().replace(/\r/g, "").split('\n');
            const hasHeader = lines[0].toLowerCase().includes('time');
            const startIndex = hasHeader ? 1 : 0;
            
            const data = lines.slice(startIndex).map(line => {
                const values = line.split(',');
                if (values.length >= 3) { 
                    return {
                        'ì‹œê°„': values[0] ? values[0].trim() : '',
                        'ì˜¨ë„': values[1] ? values[1].trim() : '',
                        'ìŠµë„': values[2] ? values[2].trim() : ''
                    };
                }
                return null;
            }).filter(row => row && row['ì‹œê°„'] && row['ì˜¨ë„'] && row['ìŠµë„']); // ìŠµë„ë„ í™•ì¸

            return { data, headers: ['ì‹œê°„', 'ì˜¨ë„', 'ìŠµë„'] };
        }

        function calculateAverage(data, key) {
            const values = data.map(row => parseFloat(row[key])).filter(v => !isNaN(v));
            return values.length > 0 ? values.reduce((a, b) => a + b, 0) / values.length : 0;
        }

        function stretchData(sourceArray, targetLength) {
            if (!sourceArray || sourceArray.length === 0) return new Array(targetLength).fill(null);
            if (sourceArray.length === targetLength) return sourceArray;

            const stretched = new Array(targetLength);
            const sourceLength = sourceArray.length;
            const scaleFactor = (sourceLength - 1) / (targetLength - 1);

            for (let i = 0; i < targetLength; i++) {
                const sourceIndexFloat = i * scaleFactor;
                const index1 = Math.floor(sourceIndexFloat);
                const index2 = Math.ceil(sourceIndexFloat);
                const fraction = sourceIndexFloat - index1;

                if (index1 >= sourceLength - 1) {
                    stretched[i] = sourceArray[sourceLength - 1];
                    continue;
                }
                if (index1 === index2) {
                    stretched[i] = sourceArray[index1];
                } else {
                    const val1 = sourceArray[index1];
                    const val2 = sourceArray[index2];
                    stretched[i] = val1 + (val2 - val1) * fraction;
                }
            }
            return stretched;
        }

        function updateCharts() {
            const selectedData = [];
            for (let i = 1; i <= 3; i++) {
                const selectValue = document.getElementById(`data${i}Select`).value;
                if (selectValue && parsedDataLibrary[selectValue]) {
                    selectedData.push({
                        key: selectValue,
                        data: parsedDataLibrary[selectValue]
                    });
                }
            }
            updateStatsTable(selectedData);
            renderCharts(selectedData);
        }

        // ìŠµë„ ì—´ ë³µì›
        function updateStatsTable(selectedData) {
            const statsTable = document.getElementById('statsTable');
            const statsContent = statsTable.querySelector('.stats-content');
            
            if (selectedData.length === 0) {
                statsTable.style.display = 'none';
                return;
            }
            statsTable.style.display = 'block';
            let tableHTML = '<table><thead><tr><th>ë°ì´í„°</th><th>í‰ê·  ì˜¨ë„ (Â°C)</th><th>í‰ê·  ìŠµë„ (%)</th></tr></thead><tbody>'; 
            
            selectedData.forEach(item => {
                const avgTemp = calculateAverage(item.data.data, 'ì˜¨ë„');
                const avgHumidity = calculateAverage(item.data.data, 'ìŠµë„'); // ìŠµë„ ê³„ì‚° ë³µì›
                tableHTML += `
                    <tr>
                        <td><strong>${dataNames[item.key]}</strong></td>
                        <td>${avgTemp.toFixed(2)}</td>
                        <td>${avgHumidity.toFixed(2)}</td>
                    </tr>
                `; // ìŠµë„ <td> ë³µì›
            });
            tableHTML += '</tbody></table>';
            statsContent.innerHTML = tableHTML;
        }

        // ì˜¨ë„, ìŠµë„ ì°¨íŠ¸ ëª¨ë‘ ìƒì„± + ì°¨íŠ¸ íŒŒê´´ ë¡œì§
        function renderCharts(selectedData) {
            const chartsContainer = document.getElementById('chartsContainer');
            
            // ê¸°ì¡´ ì°¨íŠ¸ ì¸ìŠ¤í„´ìŠ¤ íŒŒê´´
            csvChartInstances.forEach(chart => chart.destroy());
            csvChartInstances = []; // ë°°ì—´ ë¹„ìš°ê¸°
            
            chartsContainer.innerHTML = ''; // HTML ì»¨í…Œì´ë„ˆ ë¹„ìš°ê¸°
            if (selectedData.length === 0) return;
            
            // 'ì˜¨ë„', 'ìŠµë„' ì°¨íŠ¸ ëª¨ë‘ ìƒì„±
            ['ì˜¨ë„', 'ìŠµë„'].forEach(metric => {
                createChart(metric, selectedData);
            });
        }

        function createChart(metric, selectedData) {
            const style = getComputedStyle(document.documentElement);
            const textSecondaryColor = style.getPropertyValue('--text-secondary').trim();
            const textPrimaryColor = style.getPropertyValue('--text-primary').trim();

            const container = document.createElement('div');
            container.className = 'chart-container';
            container.innerHTML = `<div class="chart-title">${metric === 'ì˜¨ë„' ? 'ğŸŒ¡ï¸' : 'ğŸ’§'} ${metric} ë¹„êµ</div>`;
            const canvas = document.createElement('canvas');
            container.appendChild(canvas);
            document.getElementById('chartsContainer').appendChild(container);

            const maxDataLength = Math.max(...selectedData.map(item => 
                item.data.data.map(r => parseFloat(r[metric])).filter(v => !isNaN(v)).length
            ));
            const chartLabels = Array.from({ length: maxDataLength }, (_, i) => i + 1);

            const datasets = selectedData.map(item => {
                const values = item.data.data.map(r => parseFloat(r[metric])).filter(v => !isNaN(v));
                const stretchedValues = stretchData(values, maxDataLength);
                const colors = dataColors[item.key];
                return {
                    label: dataNames[item.key],
                    data: stretchedValues,
                    borderColor: colors.border,
                    backgroundColor: colors.bg,
                    borderWidth: 2,
                    tension: 0.4,
                    pointRadius: 0,
                    fill: true
                };
            });

            const newChart = new Chart(canvas, {
                type: 'line',
                data: { labels: chartLabels, datasets: datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            ticks: { color: textSecondaryColor }, 
                            grid: { color: 'rgba(71, 85, 105, 0.3)' },
                            title: { display: true, text: 'ë°ì´í„° ìˆœì„œ', color: textSecondaryColor }
                        },
                        y: { 
                            ticks: { color: textSecondaryColor }, 
                            grid: { color: 'rgba(71, 85, 105, 0.3)' },
                            min: 0, // Yì¶• ìµœì†Œê°’ 0
                            max: metric === 'ì˜¨ë„' ? 50 : 100 // Yì¶• ìµœëŒ€ê°’ (ì˜¨ë„ 50, ìŠµë„ 100)
                        }
                    },
                    plugins: { legend: { labels: { color: textPrimaryColor } } }
                }
            });
            
            csvChartInstances.push(newChart); // ë°°ì—´ì— ì¶”ê°€
        }

        // --- ì‹œë®¬ë ˆì´í„° ì„¹ì…˜ (ë¡¤ë°±ë¨) ---
        
        // [ë¡¤ë°±] 'image' ì†ì„± ë³µì› ë° img/ ê²½ë¡œ ì ìš©
        const simulatorData = {
            'ì‹œë©˜íŠ¸-ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)': { temp: 35.89, image: 'img/wwo.png' },
            'ì‹œë©˜íŠ¸-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)': { temp: 34.85, image: 'img/wwx.png' },
            'ì‹œë©˜íŠ¸-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸': { temp: 28.19, image: 'img/wt.png' },
            'ëŒ€ë¦¬ì„-ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)': { temp: 38.49, image: 'img/dwo.png' },
            'ëŒ€ë¦¬ì„-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)': { temp: 37.45, image: 'img/dwx.png' },
            'ëŒ€ë¦¬ì„-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸': { temp: 30.79, image: 'img/dt.png' },
            'ìœ ë¦¬-ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)': { temp: 33.23, image: 'img/gwo.png' },
            'ìœ ë¦¬-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)': { temp: 32.19, image: 'img/gwx.png' },
            'ìœ ë¦¬-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸': { temp: 25.53, image: 'img/gt.png' },
            'ì§•í¬íŒ¨ë„-ì•„ìŠ¤íŒ”íŠ¸(ë¬¼)': { temp: 36.77, image: 'img/jwo.png' },
            'ì§•í¬íŒ¨ë„-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)': { temp: 35.73, image: 'img/jwx.png' },
            'ì§•í¬íŒ¨ë„-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸': { temp: 29.07, image: 'img/jt.png' }
        };

        // [ë¡¤ë°±] updateSimulatorê°€ ì´ë¯¸ì§€ë¥¼ ê·¸ë¦¬ë„ë¡ ë³€ê²½
        function updateSimulator() {
            const key = `${document.getElementById('option1').value}-${document.getElementById('option2').value}`;
            const data = simulatorData[key];
            if (!data) return;

            // 1. ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
            const imgElement = document.getElementById('displayImage');
            imgElement.style.opacity = '0';
            setTimeout(() => {
                imgElement.src = data.image; // ì´ë¯¸ì§€ ê²½ë¡œ ì„¤ì •
                imgElement.alt = key;
                imgElement.style.opacity = '1';
            }, 300);
            
            // 2. ìš”ì•½ ì˜¨ë„ ì—…ë°ì´íŠ¸
            animateTemperature(document.getElementById('temperatureValue'), data.temp);
            updateTemperatureColor(document.getElementById('tempDisplay'), data.temp);
        }

        function animateTemperature(element, targetTemp) {
            const currentTemp = parseFloat(element.textContent) || targetTemp;
            const duration = 500;
            const frameRate = 60;
            const totalFrames = duration / (1000 / frameRate);
            const increment = (targetTemp - currentTemp) / totalFrames;
            let currentFrame = 0;

            const interval = setInterval(() => {
                currentFrame++;
                const newTemp = currentTemp + (increment * currentFrame);
                element.textContent = `${newTemp.toFixed(1)}Â°C`;
                if (currentFrame >= totalFrames) {
                    element.textContent = `${targetTemp.toFixed(1)}Â°C`;
                    clearInterval(interval);
                }
            }, 1000 / frameRate);
        }

        function updateTemperatureColor(element, temp) {
            let gradient;
            if (temp < 28) gradient = 'linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(96, 165, 250, 0.2) 100%)';
            else if (temp < 32) gradient = 'linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(52, 211, 153, 0.2) 100%)';
            else if (temp < 36) gradient = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(251, 191, 36, 0.2) 100%)';
            else gradient = 'linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(248, 113, 113, 0.2) 100%)';
            element.style.background = gradient;
        }

        // [ì‚­ì œ] ë¹„êµ ëª¨ë“œ ê´€ë ¨ ë³€ìˆ˜/í•¨ìˆ˜ ì œê±°
        
        // [ë¡¤ë°±] ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥ ë³µì›
        const galleryItems = Object.keys(simulatorData);
        let currentGalleryIndex = 0;

        // [ìˆ˜ì •] ê°¤ëŸ¬ë¦¬ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ë¹„êµ ëª¨ë“œ ì´ë¯¸ì§€ë„ í¬í•¨)
        document.querySelectorAll('.display-image').forEach(img => img.addEventListener('click', (e) => {
            const altText = e.target.alt;
            const index = galleryItems.indexOf(altText);
            if(index > -1) {
                currentGalleryIndex = index;
                openGallery();
            }
        }));

        function openGallery() {
            document.getElementById('imageGallery').style.display = 'flex';
            updateGalleryContent();
            document.addEventListener('keydown', handleGalleryKeydown);
        }

        function closeGallery() {
            document.getElementById('imageGallery').style.display = 'none';
            document.removeEventListener('keydown', handleGalleryKeydown);
        }

        function navigateGallery(direction) {
            currentGalleryIndex = (currentGalleryIndex + direction + galleryItems.length) % galleryItems.length;
            updateGalleryContent();
        }

        function updateGalleryContent() {
            const key = galleryItems[currentGalleryIndex];
            const data = simulatorData[key];
            document.getElementById('galleryImage').src = data.image; // ì´ë¯¸ì§€ ê²½ë¡œ ì„¤ì •
            document.getElementById('galleryTitle').textContent = key.replace('-', ' + ');
            document.getElementById('galleryTemp').textContent = `${data.temp.toFixed(1)}Â°C`;
        }
        
        function handleGalleryKeydown(e) {
            if (e.key === 'Escape') closeGallery();
            if (e.key === 'ArrowLeft') navigateGallery(-1);
            if (e.key === 'ArrowRight') navigateGallery(1);
        }

        function initialize() {
            for (const key in csvDataLibrary) {
                parsedDataLibrary[key] = parseCSV(csvDataLibrary[key]);
                parsedDataLibrary[key].fileName = dataNames[key];
            }
            
            // 3ê°œ íŒ¨ë„ì˜ ì´ˆê¸° ìƒíƒœ ì„¤ì •
            updatePanelContent(1, document.getElementById('data1Select').value);
            updatePanelContent(2, document.getElementById('data2Select').value);
            updatePanelContent(3, document.getElementById('data3Select').value);
            updateCharts();
            
            // ì‹œë®¬ë ˆì´í„° ì´ˆê¸°í™” (ì´ë¯¸ì§€)
            updateSimulator();
            // [ì‚­ì œ] updateComparison(); ì œê±°
        }

        window.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>






