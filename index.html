<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„ì‹œì—´ì„¬í˜„ìƒ ë¶„ì„ í”Œë«í¼</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --dark-bg-start: #0f172a;
            --dark-bg-end: #1e293b;
            --card-bg: rgba(30, 41, 59, 0.8);
            --border-color: rgba(148, 163, 184, 0.2);
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --accent-cyan: #22d3ee;
            --accent-green: #10b981;
            --accent-purple: #a855f7;
            --accent-red: #ef4444;
            --accent-orange: #f59e0b;
            --accent-yellow: #fbbf24;
            --white: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, var(--dark-bg-start) 0%, var(--dark-bg-end) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 2rem;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: block;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-green) 50%, var(--accent-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .tabs {
            display: flex;
            flex-wrap: wrap; /* íƒ­ì´ ë§ì•„ì§ˆ ê²½ìš° ì¤„ë°”ê¿ˆ */
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .tab-button {
            background: var(--card-bg);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background: rgba(30, 41, 59, 1);
            border-color: var(--accent-cyan);
        }

        .tab-button.active {
            background: linear-gradient(135deg, var(--accent-cyan) 0%, var(--accent-green) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 14px -1px rgba(34, 211, 238, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .selection-section {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        /* --- íƒ­ 1 (ëª¨ë¸ ë¶„ì„) ìŠ¤íƒ€ì¼ --- */
        .csv-analysis-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1.5rem;
        }

        .analysis-panel {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .selection-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .selection-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .selection-dropdown {
            width: 100%;
            background: rgba(15, 23, 42, 0.8);
            color: var(--text-primary);
            border: 1px solid #475569;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .selection-dropdown:hover {
            border-color: var(--accent-cyan);
        }

        .selection-dropdown:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.1);
        }

        .model-image-panel, .model-description-panel {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }
        
        .model-description-panel {
             display: flex;
             flex-direction: column;
             flex-grow: 1;
        }

        .model-image {
            width: 100%;
            height: 200px;
            border-radius: 8px;
            object-fit: cover;
        }
        .model-desc-line {
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        .model-desc-label {
            font-weight: 600;
            color: var(--text-secondary);
            display: block;
            margin-bottom: 0.25rem;
        }
        .model-desc-content {
            color: var(--text-primary);
            line-height: 1.5;
            word-break: keep-all; 
            overflow-wrap: break-word;
        }
        .model-desc-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            min-height: 2.2rem;
        }

        .model-note {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-style: italic;
            margin-top: 1rem;
            line-height: 1.4;
            word-break: keep-all;
        }

        /* --- íƒ­ 3 (ì¬ë£Œ ë¶„ì„) ìŠ¤íƒ€ì¼ --- */
        /* #materialTab ë‚´ë¶€ì˜ .selection-gridì—ë§Œ ì ìš© */
        #materialTab .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }


        /* --- ê³µí†µ ì°¨íŠ¸/í…Œì´ë¸” ìŠ¤íƒ€ì¼ --- */
        .chart-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            height: 450px;
            display: flex;
            flex-direction: column;
        }

        .chart-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .stats-table {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .stats-header {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .stats-content table {
            width: 100%;
            border-collapse: collapse;
        }

        .stats-content th, .stats-content td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid #475569;
        }

        .stats-content th {
            color: var(--text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.875rem;
        }

        /* --- íƒ­ 2 (ì‹œë®¬ë ˆì´í„°) ìŠ¤íƒ€ì¼ --- */
        .simulator-container { 
            display: grid; 
            gap: 2rem;
            grid-template-columns: 30% 70%; 
        }
        .control-panel, .display-panel {
             background: var(--card-bg); border-radius: 16px; padding: 2rem;
        }
        .dropdown-label { font-size: 0.875rem; color: var(--text-secondary); font-weight: 600; margin-bottom: 0.75rem; display: block; }
        .dropdown { width: 100%; background: rgba(15, 23, 42, 0.8); color: var(--text-primary); border: 1px solid #475569; padding: 0.75rem 1rem; border-radius: 8px; font-size: 1rem; cursor: pointer; }
        .temperature-display { border-radius: 12px; padding: 2rem; text-align: center; margin-top: 1rem; transition: background 0.5s ease;}
        .temperature-label { font-size: 0.875rem; color: var(--text-secondary); font-weight: 600; }
        .temperature-value { font-size: 3rem; font-weight: 700; transition: color 0.5s ease; }
        
        .display-image { max-width: 100%; max-height: 500px; border-radius: 8px; cursor: pointer; transition: opacity 0.5s ease; }

        /* --- ê°¤ëŸ¬ë¦¬ (ê³µí†µ) --- */
        .image-gallery { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; display: none; align-items: center; justify-content: center; }
        .gallery-overlay { position: absolute; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); }
        .gallery-content { position: relative; max-width: 80vw; max-height: 80vh; }
        .gallery-image { max-width: 100%; max-height: 80vh; border-radius: 12px; }
        .gallery-close, .gallery-nav { position: absolute; background: rgba(30, 41, 59, 0.8); color: white; border: 1px solid var(--accent-cyan); width: 50px; height: 50px; border-radius: 50%; font-size: 24px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .gallery-close { top: -25px; right: -25px; }
        .gallery-nav { top: 50%; transform: translateY(-50%); }
        .gallery-prev { left: -70px; }
        .gallery-next { right: -70px; }
        .gallery-info { position: absolute; bottom: -80px; left: 50%; transform: translateX(-50%); background: var(--card-bg); padding: 1rem 2rem; border-radius: 8px; text-align: center; }
        .gallery-title { font-size: 1.2rem; }
        .gallery-temp { font-size: 1.5rem; font-weight: bold; color: var(--accent-cyan); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (max-width: 1024px) {
            .simulator-container { grid-template-columns: 1fr; }
            .gallery-nav { display: none; }
            
            /* íƒ­ 1 ê·¸ë¦¬ë“œ ëª¨ë°”ì¼ */
            .csv-analysis-grid {
                grid-template-columns: 1fr;
            }
            
            /* íƒ­ 3 ê·¸ë¦¬ë“œ ëª¨ë°”ì¼ */
            #materialTab .selection-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ë„ì‹œ ì—´ì„¬í˜„ìƒ í•´ê²° ì‹œë®¬ë ˆì´í„°</h1>
            <p class="subtitle">Future Science High School - ë„ì‹œ ì—´ì„¬ í˜„ìƒ ì—°êµ¬</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('csv')">ë„ì‹œ ëª¨ë¸ ë¶„ì„</button>
            <button class="tab-button" onclick="switchTab('simulator')">ì˜¨ë„ ë³€í™” ì‹œë®¬ë ˆì´í„°</button>
            <button class="tab-button" onclick="switchTab('material')">ì›ë³¸ ì¬ë£Œ ë¶„ì„</button>
        </div>

        <div id="csvTab" class="tab-content active">
            <div class="selection-section">
                
                <div class="csv-analysis-grid">

                    <div class="analysis-panel">
                        <div class="selection-item">
                            <label class="selection-label">ëª¨ë¸ 1</label>
                            <select class="selection-dropdown" id="data1Select" onchange="onDropdownChange(1)">
                                <option value="model1" selected>ë„ì‹œ ëª¨ë¸ 1</option>
                                <option value="model2">ë„ì‹œ ëª¨ë¸ 2</option>
                                <option value="model3">ë„ì‹œ ëª¨ë¸ 3</option>
                                <option value="">ì„ íƒ ì•ˆ í•¨</option>
                            </select>
                        </div>
                        <div class="model-image-panel">
                            <img src="img/model1.png" alt="ëª¨ë¸ 1 ì´ë¯¸ì§€" id="modelImage1" class="model-image">
                        </div>
                        <div class="model-description-panel">
                            <div class="model-desc-title" id="modelDescTitle1">ëª¨ë¸ êµ¬ì„±</div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë…¹ì§€(20%)</span>
                                <span id="modelDescGreenery1" class="model-desc-content"></span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ì™¸ì¥ì¬(40%)</span>
                                <span id="modelDescExterior1" class="model-desc-content">-</span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë°”ë‹¥ì¬(40%)</span>
                                <span id="modelDescPavement1" class="model-desc-content">-</span>
                            </div>
                            <p class="model-note">
                                * ê±´ë¬¼ ì™¸ì¥ì¬ì™€ ë°”ë‹¥ì¬ ì¢…ë¥˜ì— ë”°ë¥¸ ë„ì‹œ ì˜¨ë„ ìƒì„¸ ë¶„ì„ì„ ìœ„í•´, ë„ì‹œ êµ¬ì„± ìš”ì†Œì˜ ë¹„ìœ¨(ë…¹ì§€ 20%, ê±´ë¬¼ ì™¸ì¥ì¬ 40%, ë°”ë‹¥ì¬ 40%)ì„ í†µì œë³€ì¸ìœ¼ë¡œ ì„¤ì •í•¨.
                            </p>
                        </div>
                    </div>

                    <div class="analysis-panel">
                        <div class="selection-item">
                            <label class="selection-label">ëª¨ë¸ 2</label>
                            <select class="selection-dropdown" id="data2Select" onchange="onDropdownChange(2)">
                                <option value="">ì„ íƒ ì•ˆ í•¨</option>
                                <option value="model1">ë„ì‹œ ëª¨ë¸ 1</option>
                                <option value="model2" selected>ë„ì‹œ ëª¨ë¸ 2</option>
                                <option value="model3">ë„ì‹œ ëª¨ë¸ 3</option>
                            </select>
                        </div>
                        <div class="model-image-panel">
                            <img src="img/model2.png" alt="ëª¨ë¸ 2 ì´ë¯¸ì§€" id="modelImage2" class="model-image">
                        </div>
                        <div class="model-description-panel">
                            <div class="model-desc-title" id="modelDescTitle2">ëª¨ë¸ êµ¬ì„±</div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë…¹ì§€(20%)</span>
                                <span id="modelDescGreenery2" class="model-desc-content"></span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ì™¸ì¥ì¬(40%)</span>
                                <span id="modelDescExterior2" class="model-desc-content">-</span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë°”ë‹¥ì¬(40%)</span>
                                <span id="modelDescPavement2" class="model-desc-content">-</span>
                            </div>
                            <p class="model-note">
                                * ê±´ë¬¼ ì™¸ì¥ì¬ì™€ ë°”ë‹¥ì¬ ì¢…ë¥˜ì— ë”°ë¥¸ ë„ì‹œ ì˜¨ë„ ìƒì„¸ ë¶„ì„ì„ ìœ„í•´, ë„ì‹œ êµ¬ì„± ìš”ì†Œì˜ ë¹„ìœ¨(ë…¹ì§€ 20%, ê±´ë¬¼ ì™¸ì¥ì¬ 40%, ë°”ë‹¥ì¬ 40%)ì„ í†µì œë³€ì¸ìœ¼ë¡œ ì„¤ì •í•¨.
                            </p>
                        </div>
                    </div>

                    <div class="analysis-panel">
                        <div class="selection-item">
                            <label class="selection-label">ëª¨ë¸ 3</label>
                            <select class="selection-dropdown" id="data3Select" onchange="onDropdownChange(3)">
                                <option value="">ì„ íƒ ì•ˆ í•¨</option>
                                <option value="model1">ë„ì‹œ ëª¨ë¸ 1</option>
                                <option value="model2">ë„ì‹œ ëª¨ë¸ 2</option>
                                <option value="model3" selected>ë„ì‹œ ëª¨ë¸ 3</option>
                            </select>
                        </div>
                        <div class="model-image-panel">
                            <img src="img/model3.png" alt="ëª¨ë¸ 3 ì´ë¯¸ì§€" id="modelImage3" class="model-image">
                        </div>
                        <div class="model-description-panel">
                            <div class="model-desc-title" id="modelDescTitle3">ëª¨ë¸ êµ¬ì„±</div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë…¹ì§€(20%)</span>
                                <span id="modelDescGreenery3" class="model-desc-content"></span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ì™¸ì¥ì¬(40%)</span>
                                <span id="modelDescExterior3" class="model-desc-content">-</span>
                            </div>
                            <div class="model-desc-line">
                                <span class="model-desc-label">ë°”ë‹¥ì¬(40%)</span>
                                <span id="modelDescPavement3" class="model-desc-content">-</span>
                            </div>
                            <p class="model-note">
                                * ê±´ë¬¼ ì™¸ì¥ì¬ì™€ ë°”ë‹¥ì¬ ì¢…ë¥˜ì— ë”°ë¥¸ ë„ì‹œ ì˜¨ë„ ìƒì„¸ ë¶„ì„ì„ ìœ„í•´, ë„ì‹œ êµ¬ì„± ìš”ì†Œì˜ ë¹„ìœ¨(ë…¹ì§€ 20%, ê±´ë¬¼ ì™¸ì¥ì¬ 40%, ë°”ë‹¥ì¬ 40%)ì„ í†µì œë³€ì¸ìœ¼ë¡œ ì„¤ì •í•¨.
                            </p>
                        </div>
                    </div>

                </div>
            </div>

            <div id="statsTable" class="stats-table" style="display:none;">
                <div class="stats-header">ğŸ“Š í†µê³„ ìš”ì•½</div>
                <div class="stats-content"></div>
            </div>

            <div id="chartsContainer"></div>
        </div>
        
        <div id="simulatorTab" class="tab-content">
            
            <div id="singleSimulator" class="simulator-container">
                <div class="control-panel">
                     <div class="dropdown-section">
                        <label class="dropdown-label">ê±´ë¬¼ ì™¸ì¥ì¬</label>
                        <select class="dropdown" id="option1" onchange="updateSimulator()">
                            <option value="ì‹œë©˜íŠ¸">ì‹œë©˜íŠ¸</option>
                            <option value="ëŒ€ë¦¬ì„">ëŒ€ë¦¬ì„</option>
                            <option value="ìœ ë¦¬">ìœ ë¦¬</option>
                            <option value="ì§•í¬íŒ¨ë„">ì§•í¬íŒ¨ë„</option>
                        </select>
                    </div>
                    <div class="dropdown-section">
                        <label class="dropdown-label">ë°”ë‹¥ì¬</label>
                        <select class="dropdown" id="option2" onchange="updateSimulator()">
                            <option value="ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸">ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸</option>
                            <option value="ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)">ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)</option>
                            <option value="íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸">íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸</option>
                        </select>
                    </div>
                    
                    <div class="dropdown-section">
                        <label class="dropdown-label">ìì—°í™˜ê²½</label>
                        <select class="dropdown" id="option3" onchange="updateSimulator()">
                            <option value="í˜¸ìˆ˜">í˜¸ìˆ˜</option>
                            <option value="ì—†ìŒ">ì—†ìŒ</option>
                        </select>
                    </div>
                    
                    <div id="tempDisplay" class="temperature-display">
                        <div class="temperature-label">ì˜ˆìƒ ì˜¨ë„</div>
                        <div class="temperature-value" id="temperatureValue">25.0Â°C</div>
                    </div>
                </div>
                <div class="display-panel">
                    <img id="displayImage" src="img/wwo.png" alt="ì‹œë©˜íŠ¸-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜" class="display-image">
                </div>
            </div>

        </div>
        
        <div id="materialTab" class="tab-content">
            <div class="selection-section">
                <div class="selection-grid"> 
                    <div class="selection-item">
                        <label class="selection-label">ë°ì´í„° 1</label>
                        <select class="selection-dropdown" id="mat_data1Select" onchange="mat_updateCharts()">
                            <option value="">ì„ íƒ ì•ˆ í•¨</option>
                            <option value="basedata" selected>ê¸°ì¤€ ë°ì´í„°</option>
                            <option value="ë²½ëŒ">ë²½ëŒ</option>
                            <option value="ëŒ€ë¦¬ì„">ëŒ€ë¦¬ì„</option>
                            <option value="GLASS">ìœ ë¦¬</option>
                            <option value="ì§•í¬íŒ¨ë„">ì§•í¬íŒ¨ë„</option>
                            <option value="ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸">ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸</option>
                            <option value="íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸">íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸</option>
                        </select>
                    </div>
                    <div class="selection-item">
                        <label class="selection-label">ë°ì´í„° 2</label>
                        <select class="selection-dropdown" id="mat_data2Select" onchange="mat_updateCharts()">
                            <option value="" selected>ì„ íƒ ì•ˆ í•¨</option>
                            <option value="basedata">ê¸°ì¤€ ë°ì´í„°</option>
                            <option value="ë²½ëŒ">ë²½ëŒ</option>
                            <option value="ëŒ€ë¦¬ì„">ëŒ€ë¦¬ì„</option>
                            <option value="GLASS">ìœ ë¦¬</option>
                            <option value="ì§•í¬íŒ¨ë„">ì§•í¬íŒ¨ë„</option>
                            <option value="ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸">ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸</option>
                            <option value="íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸">íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸</option>
                        </select>
                    </div>
                    <div class="selection-item">
                        <label class="selection-label">ë°ì´í„° 3</label>
                        <select class="selection-dropdown" id="mat_data3Select" onchange="mat_updateCharts()">
                            <option value="" selected>ì„ íƒ ì•ˆ í•¨</option>
                            <option value="basedata">ê¸°ì¤€ ë°ì´í„°</option>
                            <option value="ë²½ëŒ">ë²½ëŒ</option>
                            <option value="ëŒ€ë¦¬ì„">ëŒ€ë¦¬ì„</option>
                            <option value="GLASS">ìœ ë¦¬</option>
                            <option value="ì§•í¬íŒ¨ë„">ì§•í¬íŒ¨ë„</option>
                            <option value="ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸">ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸</option>
                            <option value="íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸">íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸</option>
                        </select>
                    </div>
                    <div class="selection-item">
                        <label class="selection-label">ë°ì´í„° 4</label>
                        <select class="selection-dropdown" id="mat_data4Select" onchange="mat_updateCharts()">
                            <option value="" selected>ì„ íƒ ì•ˆ í•¨</option>
                            <option value="basedata">ê¸°ì¤€ ë°ì´í„°</option>
                            <option value="ë²½ëŒ">ë²½ëŒ</option>
                            <option value="ëŒ€ë¦¬ì„">ëŒ€ë¦¬ì„</option>
                            <option value="GLASS">ìœ ë¦¬</option>
                            <option value="ì§•í¬íŒ¨ë„">ì§•í¬íŒ¨ë„</option>
                            <option value="ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸">ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸</option>
                            <option value="íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸">íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="mat_statsTable" class="stats-table" style="display:none;">
                <div class="stats-header">ğŸ“Š í†µê³„ ìš”ì•½</div>
                <div class="stats-content"></div> </div>

            <div id="mat_chartsContainer"></div>
        </div>

    </div>
    
    <div id="imageGallery" class="image-gallery">
        <div class="gallery-overlay" onclick="closeGallery()"></div>
        <div class="gallery-content">
            <button class="gallery-close" onclick="closeGallery()">Ã—</button>
            <button class="gallery-nav gallery-prev" onclick="navigateGallery(-1)">â€¹</button>
            <img id="galleryImage" class="gallery-image" src="img/wwo.png" alt="Gallery image">
            <button class="gallery-nav gallery-next" onclick="navigateGallery(1)">â€º</button>
            <div class="gallery-info">
                <div id="galleryTitle" class="gallery-title"></div>
                <div id="galleryTemp" class="gallery-temp"></div>
            </div>
        </div>
    </div>

    <script>
        
        // ==============================================
        // íƒ­ 1 (ë„ì‹œ ëª¨ë¸) + íƒ­ 2 (ì‹œë®¬ë ˆì´í„°) ë°ì´í„°
        // ==============================================

        // 'ë„ì‹œ ëª¨ë¸ 1, 2, 3' ë°ì´í„°
        const csvDataLibrary = {
            'model1': `Time,T,H
Time,T,H
?ã…½ì‘ 1:32:00,30,40
?ã…½ì‘ 1:36:31,30,40
?ã…½ì‘ 1:41:14,32,40
?ã…½ì‘ 1:45:58,34,40
?ã…½ì‘ 1:50:43,30,40
?ã…½ì‘ 1:55:21,33,40
?ã…½ì‘ 2:00:05,33,40
?ã…½ì‘ 2:04:48,34,40
?ã…½ì‘ 2:09:32,35,40
?ã…½ì‘ 2:14:15,34,40
?ã…½ì‘ 2:18:59,32,40
?ã…½ì‘ 2:23:43,32,41
?ã…½ì‘ 2:28:27,32,40
?ã…½ì‘ 2:33:11,33,40
?ã…½ì‘ 2:37:55,33,41
?ã…½ì‘ 2:42:39,32,41
?ã…½ì‘ 2:47:23,32,41
?ã…½ì‘ 2:52:02,30,42
?ã…½ì‘ 2:56:44,32,42
?ã…½ì‘ 3:01:27,33,40
?ã…½ì‘ 3:06:11,33,41
?ã…½ì‘ 3:10:55,33,41
?ã…½ì‘ 3:15:39,33,40
?ã…½ì‘ 3:20:17,30,43
?ã…½ì‘ 3:25:00,31,42
?ã…½ì‘ 3:29:19,30,43
?ã…½ì‘ 3:34:03,31,41
?ã…½ì‘ 3:38:46,31,42
?ã…½ì‘ 3:43:25,30,42
?ã…½ì‘ 3:48:00,30,42
?ã…½ì‘ 3:52:40,30,42
?ã…½ì‘ 3:57:15,29,42
?ã…½ì‘ 4:00:44,29,43
?ã…½ì‘ 4:04:13,28,44
?ã…½ì‘ 4:07:40,28,44
?ã…½ì‘ 4:11:08,29,44
?ã…½ì‘ 4:14:36,29,43
?ã…½ì‘ 4:18:13,29,43
?ã…½ì‘ 4:21:44,29,43
?ã…½ì‘ 4:25:15,29,43
?ã…½ì‘ 4:28:44,28,44
?ã…½ì‘ 4:32:10,28,44
?ã…½ì‘ 4:35:38,28,45
?ã…½ì‘ 4:39:02,28,44
?ã…½ì‘ 4:42:27,26,46
?ã…½ì‘ 4:45:53,26,48
`,
            'model2': `Time,T,H
?ã…½ì‘ 1:32:00,30,40
?ã…½ì‘ 1:36:31,29,38
?ã…½ì‘ 1:41:14,30,37
?ã…½ì‘ 1:45:58,30,39
?ã…½ì‘ 1:50:43,28,39
?ã…½ì‘ 1:55:21,28,41
?ã…½ì‘ 2:00:05,31,39
?ã…½ì‘ 2:04:48,31,38
?ã…½ì‘ 2:09:32,32,38
?ã…½ì‘ 2:14:15,32,36
?ã…½ì‘ 2:18:59,31,36
?ã…½ì‘ 2:23:43,30,37
?ã…½ì‘ 2:28:27,29,38
?ã…½ì‘ 2:33:11,29,38
?ã…½ì‘ 2:37:55,29,38
?ã…½ì‘ 2:42:39,29,38
?ã…½ì‘ 2:47:23,29,40
?ã…½ì‘ 2:52:02,28,41
?ã…½ì‘ 2:56:44,29,41
?ã…½ì‘ 3:01:27,27,41
?ã…½ì‘ 3:06:11,28,43
?ã…½ì‘ 3:10:55,29,41
?ã…½ì‘ 3:15:39,30,40
?ã…½ì‘ 3:20:17,29,41
?ã…½ì‘ 3:25:00,29,40
?ã…½ì‘ 3:29:19,29,41
?ã…½ì‘ 3:34:03,28,43
?ã…½ì‘ 3:38:46,27,41
?ã…½ì‘ 3:43:25,27,43
?ã…½ì‘ 3:48:00,27,43
?ã…½ì‘ 3:52:40,28,42
?ã…½ì‘ 3:57:15,27,43
?ã…½ì‘ 4:00:44,26,44
?ã…½ì‘ 4:04:13,26,45
?ã…½ì‘ 4:07:40,26,44
?ã…½ì‘ 4:11:08,26,44
?ã…½ì‘ 4:14:36,26,45
?ã…½ì‘ 4:18:13,25,47
?ã…½ì‘ 4:21:44,25,48
?ã…½ì‘ 4:25:15,25,48
?ã…½ì‘ 4:28:44,25,48
?ã…½ì‘ 4:32:10,25,49
?ã…½ì‘ 4:35:38,25,49
?ã…½ì‘ 4:39:02,25,49
?ã…½ì‘ 4:42:27,24,50
?ã…½ì‘ 4:45:53,23,52
`,
            'model3': `Time,T,H
Time,T,H
Time,City_Temperature_Predicted,City_Humidity_Predicted
ì˜¤í›„ 1:32:00,29,42
ì˜¤í›„ 1:36:31,28,40
ì˜¤í›„ 1:41:14,29,40
ì˜¤í›„ 1:45:58,29,42
ì˜¤í›„ 1:50:43,27,43
ì˜¤í›„ 1:55:21,27,44
ì˜¤í›„ 2:00:05,30,42
ì˜¤í›„ 2:04:48,30,41
ì˜¤í›„ 2:09:32,31,41
ì˜¤í›„ 2:14:15,31,39
ì˜¤í›„ 2:18:59,31,39
ì˜¤í›„ 2:23:43,29,40
ì˜¤í›„ 2:28:27,29,40
ì˜¤í›„ 2:33:11,29,40
ì˜¤í›„ 2:37:55,29,40
ì˜¤í›„ 2:42:39,29,40
ì˜¤í›„ 2:47:23,29,43
ì˜¤í›„ 2:52:02,27,45
ì˜¤í›„ 2:56:44,28,43
ì˜¤í›„ 3:01:27,27,44
ì˜¤í›„ 3:06:11,27,46
ì˜¤í›„ 3:10:55,29,43
ì˜¤í›„ 3:15:39,29,43
ì˜¤í›„ 3:20:17,28,43
ì˜¤í›„ 3:25:00,28,42
ì˜¤í›„ 3:29:19,28,43
ì˜¤í›„ 3:34:03,27,45
ì˜¤í›„ 3:38:46,27,43
ì˜¤í›„ 3:43:25,26,45
ì˜¤í›„ 3:48:00,27,45
ì˜¤í›„ 3:52:40,27,44
ì˜¤í›„ 3:57:15,26,46
ì˜¤í›„ 4:00:44,26,47
ì˜¤í›„ 4:04:13,25,47
ì˜¤í›„ 4:07:40,26,46
ì˜¤í›„ 4:11:08,26,46
ì˜¤í›„ 4:14:36,25,47
ì˜¤í›„ 4:18:13,24,49
ì˜¤í›„ 4:21:44,24,51
ì˜¤í›„ 4:25:15,24,51
ì˜¤í›„ 4:28:44,24,51
ì˜¤í›„ 4:32:10,24,52
ì˜¤í›„ 4:35:38,24,52
ì˜¤í›„ 4:39:02,24,51
ì˜¤í›„ 4:42:27,24,52
ì˜¤í›„ 4:45:53,22,55
`
        };

        const modelDescriptionData = {
            'model1': {
                greenery: '',
                exterior: 'ëŒ€ë¦¬ì„ 70%, ì‹œë©˜íŠ¸ 30%',
                pavement: 'ì¼ë°˜ ì•„ìŠ¤íŒ”íŠ¸ 100%'
            },
            'model2': {
                greenery: '',
                exterior: 'ìœ ë¦¬ 26.79%, ì‹œë©˜íŠ¸ 25.64%, íŒ¨ë„ 24.29%, ëŒ€ë¦¬ì„ 23.27%',
                pavement: 'ì¼ë°˜ ì•„ìŠ¤íŒ”íŠ¸ 35.9%, íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸ 64.1%'
            },
            'model3': {
                greenery: '',
                exterior: 'ìœ ë¦¬ 26.79%, ì‹œë©˜íŠ¸ 25.64%, íŒ¨ë„ 24.29%, ëŒ€ë¦¬ì„ 23.27%',
                pavement: 'íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸ 38.79%, ì¼ë°˜ ì•„ìŠ¤íŒ”íŠ¸ 31.84%, ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸ 29.37%'
            }
        };

        const modelImageData = {
            'model1': 'img/model1.png',
            'model2': 'img/model2.png',
            'model3': 'img/model3.png'
        };

        const dataColors = {
            'model1': { border: 'rgba(34, 211, 238, 0.8)', bg: 'rgba(34, 211, 238, 0.2)' },
            'model2': { border: 'rgba(16, 185, 129, 0.8)', bg: 'rgba(16, 185, 129, 0.2)' },
            'model3': { border: 'rgba(168, 85, 247, 0.8)', bg: 'rgba(168, 85, 247, 0.2)' }
        };

        const dataNames = {
            'model1': 'ë„ì‹œ ëª¨ë¸ 1',
            'model2': 'ë„ì‹œ ëª¨ë¸ 2',
            'model3': 'ë„ì‹œ ëª¨ë¸ 3'
        };

        const simulatorData = {
            'ì‹œë©˜íŠ¸-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 28.08, image: 'img/wwo.png' },
            'ì‹œë©˜íŠ¸-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 26.08, image: 'img/ww-2.png' },
            'ì‹œë©˜íŠ¸-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-ì—†ìŒ': { temp: 28.92, image: 'img/wwx.png' },
            'ì‹œë©˜íŠ¸-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-í˜¸ìˆ˜': { temp: 26.92, image: 'img/w-2.png' },
            'ì‹œë©˜íŠ¸-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 25.02, image: 'img/wt.png' },
            'ì‹œë©˜íŠ¸-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 23.02, image: 'img/wt-2.png' },
            'ëŒ€ë¦¬ì„-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 29.67, image: 'img/dwo.png' },
            'ëŒ€ë¦¬ì„-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 27.67, image: 'img/dw-2.png' },
            'ëŒ€ë¦¬ì„-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-ì—†ìŒ': { temp: 30.67, image: 'img/dwx.png' },
            'ëŒ€ë¦¬ì„-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-í˜¸ìˆ˜': { temp: 28.67, image: 'img/d-2.png' },
            'ëŒ€ë¦¬ì„-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 26.72, image: 'img/dt.png' },
            'ëŒ€ë¦¬ì„-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 24.72, image: 'img/dt-2.png' },
            'ìœ ë¦¬-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 26.92, image: 'img/gwo.png' },
            'ìœ ë¦¬-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 24.92, image: 'img/gw-2.png' },
            'ìœ ë¦¬-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-ì—†ìŒ': { temp: 27.9, image: 'img/gwx.png' },
            'ìœ ë¦¬-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-í˜¸ìˆ˜': { temp: 25.9, image: 'img/g-2.png' },
            'ìœ ë¦¬-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 24.0, image: 'img/gt.png' },
            'ìœ ë¦¬-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 22.0, image: 'img/gt-2.png' },
            'ì§•í¬íŒ¨ë„-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 29.74, image: 'img/jw-2.png' },
            'ì§•í¬íŒ¨ë„-ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 27.74, image: 'img/jwo.png' },
            'ì§•í¬íŒ¨ë„-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-ì—†ìŒ': { temp: 30.64, image: 'img/jwx.png' },
            'ì§•í¬íŒ¨ë„-ì•„ìŠ¤íŒ”íŠ¸(ì¼ë°˜)-í˜¸ìˆ˜': { temp: 28.64, image: 'img/j-2.png' },
            'ì§•í¬íŒ¨ë„-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-ì—†ìŒ': { temp: 26.74, image: 'img/jt.png' },
            'ì§•í¬íŒ¨ë„-íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸-í˜¸ìˆ˜': { temp: 24.74, image: 'img/jt-2.png' }
        };
        
        // íƒ­ 1 (ëª¨ë¸) ìš© ë³€ìˆ˜
        let parsedDataLibrary = {};
        let csvChartInstances = []; 


        // ==============================================
        // íƒ­ 3 (ì›ë³¸ ì¬ë£Œ) ë°ì´í„° (Roh.htmlì—ì„œ ê°€ì ¸ì˜´)
        // ==============================================
        
        // ë³€ìˆ˜ëª… ì¶©ëŒì„ í”¼í•˜ê¸° ìœ„í•´ 'mat_' ì ‘ë‘ì‚¬ ì‚¬ìš©
        const mat_csvDataLibrary = {
            'basedata': `Time,H,T,,
ì‹œê°„,ê°’1,ê°’2
ì˜¤ì „ 1:27:00,48,24.06
ì˜¤ì „ 1:31:00,47,24.5
ì˜¤ì „ 1:35:00,47,24.06
ì˜¤ì „ 1:39:00,48,25.06
ì˜¤ì „ 1:43:00,48,24.13
ì˜¤ì „ 1:47:00,49,23.13
ì˜¤ì „ 1:52:00,50,23.06
ì˜¤ì „ 1:56:00,48,24.31
ì˜¤ì „ 2:00:00,50,24.5
ì˜¤ì „ 2:04:00,48,25.38
ì˜¤ì „ 2:08:00,48,25.19
ì˜¤ì „ 2:12:00,48,25.31
ì˜¤ì „ 2:17:00,49,24.25
ì˜¤ì „ 2:21:00,50,23.56
ì˜¤ì „ 2:25:00,48,23.88
ì˜¤ì „ 2:29:00,49,24.31
ì˜¤ì „ 2:33:00,50,24.19
ì˜¤ì „ 2:37:00,49,24.69
ì˜¤ì „ 2:42:00,50,23.63
ì˜¤ì „ 2:46:00,52,23.44
ì˜¤ì „ 2:50:00,51,22.69
ì˜¤ì „ 2:54:00,52,24.13
ì˜¤ì „ 2:58:00,51,24.88
ì˜¤ì „ 3:02:00,50,24.63
ì˜¤ì „ 3:07:00,50,24.31
ì˜¤ì „ 3:11:00,51,24.56
ì˜¤ì „ 3:15:00,50,24.25
ì˜¤ì „ 3:19:00,53,23.94
ì˜¤ì „ 3:23:00,52,23.06
ì˜¤ì „ 3:27:00,53,23.19
ì˜¤ì „ 3:32:00,52,24.19
ì˜¤ì „ 3:36:00,52,24.31
ì˜¤ì „ 3:40:00,54,23.5
ì˜¤ì „ 3:44:00,53,23.31
ì˜¤ì „ 3:48:00,53,23.31
ì˜¤ì „ 3:53:00,53,23.88
ì˜¤ì „ 3:57:00,54,22.19
ì˜¤ì „ 4:01:00,55,22.25
ì˜¤ì „ 4:05:00,56,21.88
ì˜¤ì „ 4:09:00,56,22.94
ì˜¤ì „ 4:13:00,56,23.44
ì˜¤ì „ 4:18:00,56,22.75
ì˜¤ì „ 4:22:00,55,23.19
ì˜¤ì „ 4:26:00,55,22.75
ì˜¤ì „ 4:30:00,56,23.31
ì˜¤ì „ 4:34:00,58,22
ì˜¤ì „ 4:38:00,57,22
ì˜¤ì „ 4:43:00,58,21.5`,
            'ë²½ëŒ': `00:00.0,34,37.25
04:00.4,35,35.25
08:07.2,35,39
12:18.6,35,38.88
16:36.3,36,34.94
20:26.2,38,33.69
24:13.1,39,38.75
28:24.5,38,38.38
32:38.4,38,39.31
37:41.6,35,41.44
42:42.9,35,36.63
46:33.1,37,35.13
50:22.9,38,35
54:11.8,37,34.81
58:08.4,37,35.75
01:59.4,37,36.5
05:50.2,39,37.19
09:38.2,39,34.06
13:27.8,40,34.13
17:19.7,38,32.88
21:08.7,39,31.25
24:58.6,39,35.81
28:49.4,39,37
32:40.3,39,36.75
36:29.2,38,35.25
40:20.7,37,37.56
44:12.8,38,36.19
48:02.8,41,32.38
51:57.5,39,32.75
56:06.5,42,30.13
00:15.2,41,34.13
04:21.3,42,32.56
08:28.5,42,32.63
12:35.3,42,31.69
16:42.5,41,32.25
20:50.5,42,32.5
24:58.0,42,30.81
29:05.6,44,29.19
33:01.5,44,28.94
36:53.7,45,27.94
40:39.2,45,29.63
44:28.0,47,30.56
48:15.2,46,30.5
52:03.4,46,30.19
55:52.8,45,29.5
59:39.1,46,29.38
03:31.0,48,27.44
07:19.5,49,27.25
11:09.3,50,26.13
14:57.7,52,25.13
`,
            'ëŒ€ë¦¬ì„': `time,H,T
ì˜¤í›„ 1:32:00,33,36.06
ì˜¤í›„ 1:36:31,31,35.94
ì˜¤í›„ 1:41:14,31,39.75
ì˜¤í›„ 1:45:58,32,42.81
ì˜¤í›„ 1:50:43,33,36.31
ì˜¤í›„ 1:55:21,33,40.94
ì˜¤í›„ 2:00:05,32,42.19
ì˜¤í›„ 2:04:48,32,43.75
ì˜¤í›„ 2:09:32,30,44.81
ì˜¤í›„ 2:14:15,30,44.75
ì˜¤í›„ 2:18:59,33,40.56
ì˜¤í›„ 2:23:43,34,40.38
ì˜¤í›„ 2:28:27,32,39.25
ì˜¤í›„ 2:33:11,32,40.63
ì˜¤í›„ 2:37:55,34,41.75
ì˜¤í›„ 2:42:39,34,39.06
ì˜¤í›„ 2:47:23,34,39.88
ì˜¤í›„ 2:52:02,36,35.56
ì˜¤í›„ 2:56:44,35,40.06
ì˜¤í›„ 3:01:27,33,41.19
ì˜¤í›„ 3:06:11,34,41
ì˜¤í›„ 3:10:55,34,41.63
ì˜¤í›„ 3:15:39,33,41.69
ì˜¤í›„ 3:20:17,38,36.5
ì˜¤í›„ 3:25:00,36,37
ì˜¤í›„ 3:29:19,38,35.5
ì˜¤í›„ 3:34:03,34,37.69
ì˜¤í›„ 3:38:46,36,37.69
ì˜¤í›„ 3:43:25,37,35.81
ì˜¤í›„ 3:48:00,36,35.5
ì˜¤í›„ 3:52:40,36,35.94
ì˜¤í›„ 3:57:15,38,33.94
ì˜¤í›„ 4:00:44,39,33.13
ì˜¤í›„ 4:04:13,40,31.75
ì˜¤í›„ 4:07:40,41,31.25
ì˜¤í›„ 4:11:08,40,33
ì˜¤í›„ 4:14:36,39,33.5
ì˜¤í›„ 4:18:13,39,33.06
ì˜¤í›„ 4:21:44,39,33.44
ì˜¤í›„ 4:25:15,39,33.06
ì˜¤í›„ 4:28:44,41,31.94
ì˜¤í›„ 4:32:10,41,31.5
ì˜¤í›„ 4:35:38,43,30.56
ì˜¤í›„ 4:39:02,42,30.31
ì˜¤í›„ 4:42:27,45,27.88
ì˜¤í›„ 4:45:53,50,26.31
`,
            'GLASS': `00:00.0,28,35.94
04:08.1,27,35.5
08:16.5,21,37
12:25.4,22,36.31
16:33.5,26,33.94
20:41.8,29,33.38
24:50.2,22,36.88
28:58.7,21,36.88
33:07.2,24,37.06
37:15.8,18,37.75
41:24.5,17,38.88
45:33.3,25,34.25
49:41.4,29,33.63
53:49.7,26,33.81
57:58.7,26,33.75
02:06.5,25,34.31
06:14.8,28,34.44
10:23.2,28,33.69
14:31.5,29,34.13
18:39.8,30,32.06
22:48.3,33,32.31
26:56.4,27,34.94
31:04.8,26,35
35:13.1,29,33.56
39:21.5,23,35.56
43:29.9,25,34.63
47:38.2,35,30.19
51:46.3,30,31.5
55:54.5,34,28.81
00:02.6,34,30.88
04:10.7,32,30.88
08:18.9,33,30.69
12:27.0,35,29.19
16:35.0,35,29.13
20:43.0,35,28.56
24:51.5,36,27.56
28:58.9,38,26.56
33:06.8,41,25.88
37:14.6,42,26.13
41:22.5,42,26.31
45:30.4,40,27.06
49:38.3,40,27.31
53:46.2,41,26.56
57:54.8,44,25.44
02:01.9,47,24.06
06:09.5,54,21.88
10:17.2,54,21.56
14:24.8,58,20.5
`,
            'ì§•í¬íŒ¨ë„': `00:00.0,26,36.75
04:09.6,17,36.75
08:19.4,10,41.75
12:29.4,11,41.25
16:39.4,10,37.81
20:49.2,14,36.56
24:59.2,11,42.94
29:09.2,11,41.81
33:19.2,10,44.06
37:29.2,8,43
41:39.2,8,44.38
45:48.9,9,39.81
49:58.9,12,39
54:08.8,12,38.69
58:18.8,13,37.75
02:28.7,12,38.69
06:38.7,11,39.94
10:48.6,12,36.69
14:58.5,13,39.63
19:08.4,15,32.25
23:18.2,18,38.38
27:28.2,12,41.5
31:38.2,11,41.06
35:48.3,11,40.88
39:58.3,11,41.75
44:08.3,11,40.56
48:18.2,19,34.94
52:28.8,15,36
56:37.9,22,33.63
00:47.8,20,37.81
04:57.7,18,38.25
09:07.6,17,35.13
13:17.5,18,36.75
17:27.4,19,36
21:37.2,20,36.06
25:47.9,22,30.5
29:56.8,28,31
34:06.6,31,29.56
38:16.4,31,31.75
42:26.2,30,32.88
46:36.6,29,32.75
50:45.9,30,33.19
54:55.7,29,32.81
59:05.5,31,32.5
03:15.3,35,30.69
07:25.6,37,29.06
11:34.8,41,27
`,
            'ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸': `ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 1:27:00,39,24.06
ì˜¤í›„ 2:28:51,41,23
ì˜¤í›„ 2:32:58,42,23.13
ì˜¤í›„ 2:37:06,42,23
ì˜¤í›„ 2:41:13,45,23.06
ì˜¤í›„ 2:45:21,43,22.31
ì˜¤í›„ 2:49:28,43,21.81
ì˜¤í›„ 2:53:36,45,22.06
ì˜¤í›„ 2:57:44,45,22.94
ì˜¤í›„ 3:01:50,45,22.25
ì˜¤í›„ 3:05:58,44,22.94
ì˜¤í›„ 3:10:06,46,23
ì˜¤í›„ 3:14:14,46,22.69
ì˜¤í›„ 3:18:20,44,21.56
ì˜¤í›„ 3:22:28,45,22.13
ì˜¤í›„ 3:26:35,45,21.94
ì˜¤í›„ 3:30:43,45,22.25
ì˜¤í›„ 3:34:50,46,22.31
ì˜¤í›„ 3:38:58,46,22
ì˜¤í›„ 3:43:05,48,21.88
ì˜¤í›„ 3:47:13,46,21.56
ì˜¤í›„ 3:51:20,46,21.38
ì˜¤í›„ 3:55:27,47,21.88
ì˜¤í›„ 3:59:35,48,21.19
ì˜¤í›„ 4:03:42,49,21
ì˜¤í›„ 4:07:49,49,20.44
ì˜¤í›„ 4:11:57,50,21.06
ì˜¤í›„ 4:16:04,51,20.81
ì˜¤í›„ 4:20:12,51,20.88
ì˜¤í›„ 4:24:19,50,20.81
ì˜¤í›„ 4:28:26,51,20.81
ì˜¤í›„ 4:32:34,52,20.44
ì˜¤í›„ 4:36:41,51,20.31
ì˜¤í›„ 4:40:49,52,20.25
ì˜¤í›„ 4:44:56,53,19.88
`,
            'íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸': `time,H,T
ì˜¤ì „ 8:53:00,58.2,20.63
ì˜¤ì „ 8:55:28,54.6,17.64
ì˜¤ì „ 8:57:58,60.8,16.245
ì˜¤ì „ 9:00:29,64.9,16.47
ì˜¤ì „ 9:02:58,65.5,15.69
ì˜¤ì „ 9:05:30,66.7,14.39
ì˜¤ì „ 9:08:00,63.4,16.37
ì˜¤ì „ 9:10:31,61.7,17.71
ì˜¤ì „ 9:13:03,59.8,18.35
ì˜¤ì „ 9:15:34,58.2,19.115
ì˜¤ì „ 9:18:06,58.2,19.29
ì˜¤ì „ 9:20:37,56.3,19.42
ì˜¤ì „ 9:23:08,54.6,18.665
ì˜¤ì „ 9:25:39,56.1,18.05
ì˜¤ì „ 9:28:11,55.7,17.43
ì˜¤ì „ 9:30:42,56.2,17.9
ì˜¤ì „ 9:33:14,62.7,16.445
ì˜¤ì „ 9:35:46,66.8,16.42
ì˜¤ì „ 9:38:19,62.8,16.145
ì˜¤ì „ 9:40:50,65,15.59
ì˜¤ì „ 9:43:22,67,15.175
ì˜¤ì „ 9:45:56,64,16.59
ì˜¤ì „ 9:48:27,64,17.34
ì˜¤ì „ 9:51:01,61.1,17.495
ì˜¤ì „ 9:53:33,62.2,16.77
ì˜¤ì „ 9:56:06,64.9,16.575
ì˜¤ì „ 9:58:39,63.6,16.805
ì˜¤ì „ 10:01:22,60.7,17.02
ì˜¤ì „ 10:04:11,60.7,17.055
ì˜¤ì „ 10:07:00,60.4,17.11
ì˜¤ì „ 10:09:47,62.2,16.95
ì˜¤ì „ 10:12:37,66.2,16.055
ì˜¤ì „ 10:15:26,69.2,15.105
ì˜¤ì „ 10:18:15,68.2,14.71
ì˜¤ì „ 10:21:05,64.9,16.4
ì˜¤ì „ 10:23:55,61.6,18.02
ì˜¤ì „ 10:26:44,61.7,17.32
ì˜¤ì „ 10:29:14,65.5,15.39
ì˜¤ì „ 10:31:43,70.5,13.78
ì˜¤ì „ 10:34:15,70.4,14.715
ì˜¤ì „ 10:36:45,73.4,14.39
ì˜¤ì „ 10:39:18,72.9,14.575
ì˜¤ì „ 10:41:49,72.4,15.265
ì˜¤ì „ 10:44:19,68.8,16.05
ì˜¤ì „ 10:46:51,68.7,16.28
ì˜¤ì „ 10:49:22,71.4,14.19
ì˜¤ì „ 10:51:54,71.2,15.18
ì˜¤ì „ 10:54:25,69.3,15.18
ì˜¤ì „ 10:56:59,68,14.61
`
        };

        const mat_dataColors = {
            'basedata': { border: 'rgba(255, 255, 255, 0.8)', bg: 'rgba(255, 255, 255, 0.1)' },
            'ë²½ëŒ': { border: 'rgba(239, 68, 68, 0.8)', bg: 'rgba(239, 68, 68, 0.2)' },
            'ëŒ€ë¦¬ì„': { border: 'rgba(245, 158, 11, 0.8)', bg: 'rgba(245, 158, 11, 0.2)' },
            'GLASS': { border: 'rgba(34, 211, 238, 0.8)', bg: 'rgba(34, 211, 238, 0.2)' },
            'ì§•í¬íŒ¨ë„': { border: 'rgba(168, 85, 247, 0.8)', bg: 'rgba(168, 85, 247, 0.2)' },
            'ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸': { border: 'rgba(16, 185, 129, 0.8)', bg: 'rgba(16, 185, 129, 0.2)' },
            'íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸': { border: 'rgba(251, 191, 36, 0.8)', bg: 'rgba(251, 191, 36, 0.2)' }
        };

        const mat_dataNames = {
            'basedata': 'ê¸°ì¤€ ë°ì´í„°',
            'ë²½ëŒ': 'ë²½ëŒ',
            'ëŒ€ë¦¬ì„': 'ëŒ€ë¦¬ì„',
            'GLASS': 'ìœ ë¦¬',
            'ì§•í¬íŒ¨ë„': 'ì§•í¬íŒ¨ë„',
            'ë¬¼ìˆëŠ”ì•„ìŠ¤íŒ”íŠ¸': 'ë¬¼ ìˆëŠ” ì•„ìŠ¤íŒ”íŠ¸',
            'íˆ¬ìˆ˜ì„±ì•„ìŠ¤íŒ”íŠ¸': 'íˆ¬ìˆ˜ì„± ì•„ìŠ¤íŒ”íŠ¸'
        };

        // íƒ­ 3 (ì¬ë£Œ) ìš© ë³€ìˆ˜
        let mat_parsedDataLibrary = {};
        let mat_csvChartInstances = [];


        // ==============================================
        // ê³µí†µ íƒ­ ìŠ¤í¬ë¦½íŠ¸
        // ==============================================

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            
            let targetTabId = '';
            if (tabName === 'csv') targetTabId = 'csvTab';
            else if (tabName === 'simulator') targetTabId = 'simulatorTab';
            else if (tabName === 'material') targetTabId = 'materialTab';
            
            document.getElementById(targetTabId).classList.add('active');
            document.querySelector(`.tab-button[onclick="switchTab('${tabName}')"]`).classList.add('active');
        }

        // ==============================================
        // íƒ­ 1 (ë„ì‹œ ëª¨ë¸) ìŠ¤í¬ë¦½íŠ¸
        // ==============================================

        function onDropdownChange(index) {
            const modelKey = document.getElementById(`data${index}Select`).value;
            updatePanelContent(index, modelKey);
            updateCharts();
        }

        function updatePanelContent(index, modelKey) {
            const imgEl = document.getElementById(`modelImage${index}`);
            const titleEl = document.getElementById(`modelDescTitle${index}`);
            const greeneryEl = document.getElementById(`modelDescGreenery${index}`);
            const exteriorEl = document.getElementById(`modelDescExterior${index}`);
            const pavementEl = document.getElementById(`modelDescPavement${index}`);
            
            const descData = modelDescriptionData[modelKey];
            const imgPath = modelImageData[modelKey];
            
            if (descData && imgPath) {
                imgEl.src = imgPath; 
                titleEl.textContent = `ëª¨ë¸ êµ¬ì„± (${dataNames[modelKey]})`;
                greeneryEl.textContent = descData.greenery || '';
                exteriorEl.textContent = descData.exterior;
                pavementEl.textContent = descData.pavement;
            } else {
                imgEl.src = 'https://placehold.co/600x400/1e293b/94a3b8?text=Image+Not+Found';
                titleEl.textContent = 'ëª¨ë¸ êµ¬ì„±';
                greeneryEl.textContent = '';
                exteriorEl.textContent = '-';
                pavementEl.textContent = '-';
            }
        }

        // íƒ­ 1ìš© CSV íŒŒì„œ (Time,T,H)
        function parseCSV(csvText) {
            const lines = csvText.trim().replace(/\r/g, "").split('\n');
            const hasHeader = lines[0].toLowerCase().includes('time');
            const startIndex = hasHeader ? 1 : 0;
            
            const data = lines.slice(startIndex).map(line => {
                const values = line.split(',');
                if (values.length >= 3) { 
                    return {
                        'ì‹œê°„': values[0] ? values[0].trim() : '',
                        'ì˜¨ë„': values[1] ? values[1].trim() : '',
                        'ìŠµë„': values[2] ? values[2].trim() : ''
                    };
                }
                return null;
            }).filter(row => row && row['ì‹œê°„'] && row['ì˜¨ë„'] && row['ìŠµë„']);

            return { data, headers: ['ì‹œê°„', 'ì˜¨ë„', 'ìŠµë„'] };
        }

        // íƒ­ 1ìš© í‰ê·  ê³„ì‚°
        function calculateAverage(data, key) {
            const values = data.map(row => parseFloat(row[key])).filter(v => !isNaN(v));
            return values.length > 0 ? values.reduce((a, b) => a + b, 0) / values.length : 0;
        }

        // íƒ­ 1ìš© ë°ì´í„° ê¸¸ì´ ë§ì¶”ê¸°
        function stretchData(sourceArray, targetLength) {
            if (!sourceArray || sourceArray.length === 0) return new Array(targetLength).fill(null);
            if (sourceArray.length === targetLength) return sourceArray;

            const stretched = new Array(targetLength);
            const sourceLength = sourceArray.length;
            const scaleFactor = (sourceLength - 1) / (targetLength - 1);

            for (let i = 0; i < targetLength; i++) {
                const sourceIndexFloat = i * scaleFactor;
                const index1 = Math.floor(sourceIndexFloat);
                const index2 = Math.ceil(sourceIndexFloat);
                const fraction = sourceIndexFloat - index1;

                if (index1 >= sourceLength - 1) {
                    stretched[i] = sourceArray[sourceLength - 1];
                    continue;
                }
                if (index1 === index2) {
                    stretched[i] = sourceArray[index1];
                } else {
                    const val1 = sourceArray[index1];
                    const val2 = sourceArray[index2];
                    stretched[i] = val1 + (val2 - val1) * fraction;
                }
            }
            return stretched;
        }

        // íƒ­ 1ìš© ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateCharts() {
            const selectedData = [];
            for (let i = 1; i <= 3; i++) {
                const selectValue = document.getElementById(`data${i}Select`).value;
                if (selectValue && parsedDataLibrary[selectValue]) {
                    selectedData.push({
                        key: selectValue,
                        data: parsedDataLibrary[selectValue]
                    });
                }
            }
            updateStatsTable(selectedData);
            renderCharts(selectedData);
        }

        // íƒ­ 1ìš© í†µê³„ í…Œì´ë¸”
        function updateStatsTable(selectedData) {
            const statsTable = document.getElementById('statsTable');
            const statsContent = statsTable.querySelector('.stats-content');
            
            if (selectedData.length === 0) {
                statsTable.style.display = 'none';
                return;
            }
            statsTable.style.display = 'block';
            let tableHTML = '<table><thead><tr><th>ë°ì´í„°</th><th>í‰ê·  ì˜¨ë„ (Â°C)</th><th>í‰ê·  ìŠµë„ (%)</th></tr></thead><tbody>'; 
            
            selectedData.forEach(item => {
                const avgTemp = calculateAverage(item.data.data, 'ì˜¨ë„');
                const avgHumidity = calculateAverage(item.data.data, 'ìŠµë„');
                tableHTML += `
                    <tr>
                        <td><strong>${dataNames[item.key]}</strong></td>
                        <td>${avgTemp.toFixed(2)}</td>
                        <td>${avgHumidity.toFixed(2)}</td>
                    </tr>
                `;
            });
            tableHTML += '</tbody></table>';
            statsContent.innerHTML = tableHTML;
        }

        // íƒ­ 1ìš© ì°¨íŠ¸ ë Œë”ë§
        function renderCharts(selectedData) {
            const chartsContainer = document.getElementById('chartsContainer');
            
            csvChartInstances.forEach(chart => chart.destroy());
            csvChartInstances = [];
            
            chartsContainer.innerHTML = '';
            if (selectedData.length === 0) return;
            
            ['ì˜¨ë„', 'ìŠµë„'].forEach(metric => {
                createChart(metric, selectedData);
            });
        }

        // íƒ­ 1ìš© ì°¨íŠ¸ ìƒì„±
        function createChart(metric, selectedData) {
            const style = getComputedStyle(document.documentElement);
            const textSecondaryColor = style.getPropertyValue('--text-secondary').trim();
            const textPrimaryColor = style.getPropertyValue('--text-primary').trim();

            const container = document.createElement('div');
            container.className = 'chart-container';
            container.innerHTML = `<div class="chart-title">${metric === 'ì˜¨ë„' ? 'ğŸŒ¡ï¸' : 'ğŸ’§'} ${metric} ë¹„êµ</div>`;
            const canvas = document.createElement('canvas');
            container.appendChild(canvas);
            document.getElementById('chartsContainer').appendChild(container);

            const maxDataLength = Math.max(...selectedData.map(item => 
                item.data.data.map(r => parseFloat(r[metric])).filter(v => !isNaN(v)).length
            ));
            const chartLabels = Array.from({ length: maxDataLength }, (_, i) => i + 1);

            const datasets = selectedData.map(item => {
                const values = item.data.data.map(r => parseFloat(r[metric])).filter(v => !isNaN(v));
                const stretchedValues = stretchData(values, maxDataLength);
                const colors = dataColors[item.key];
                return {
                    label: dataNames[item.key],
                    data: stretchedValues,
                    borderColor: colors.border,
                    backgroundColor: colors.bg,
                    borderWidth: 2,
                    tension: 0.4,
                    pointRadius: 0,
                    fill: true
                };
            });

            const newChart = new Chart(canvas, {
                type: 'line',
                data: { labels: chartLabels, datasets: datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            ticks: { color: textSecondaryColor }, 
                            grid: { color: 'rgba(71, 85, 105, 0.3)' },
                            title: { display: true, text: 'ë°ì´í„° ìˆœì„œ', color: textSecondaryColor }
                        },
                        y: { 
                            ticks: { color: textSecondaryColor }, 
                            grid: { color: 'rgba(71, 85, 105, 0.3)' },
                            min: metric === 'ìŠµë„' ? 10 : 0,
                            max: metric === 'ì˜¨ë„' ? 50 : 80
                        }
                    },
                    plugins: { legend: { labels: { color: textPrimaryColor } } }
                }
            });
            
            csvChartInstances.push(newChart);
        }

        // ==============================================
        // íƒ­ 2 (ì‹œë®¬ë ˆì´í„°) ìŠ¤í¬ë¦½íŠ¸
        // ==============================================

        function updateSimulator() {
            const key = `${document.getElementById('option1').value}-${document.getElementById('option2').value}-${document.getElementById('option3').value}`;
            const data = simulatorData[key];
            if (!data) return;

            const imgElement = document.getElementById('displayImage');
            imgElement.style.opacity = '0';
            setTimeout(() => {
                imgElement.src = data.image;
                imgElement.alt = key;
                imgElement.style.opacity = '1';
            }, 300);
            
            animateTemperature(document.getElementById('temperatureValue'), data.temp);
            updateTemperatureColor(document.getElementById('tempDisplay'), data.temp);
        }

        function animateTemperature(element, targetTemp) {
            const currentTemp = parseFloat(element.textContent) || targetTemp;
            const duration = 500;
            const frameRate = 60;
            const totalFrames = duration / (1000 / frameRate);
            const increment = (targetTemp - currentTemp) / totalFrames;
            let currentFrame = 0;

            const interval = setInterval(() => {
                currentFrame++;
                const newTemp = currentTemp + (increment * currentFrame);
                element.textContent = `${newTemp.toFixed(1)}Â°C`;
                if (currentFrame >= totalFrames) {
                    element.textContent = `${targetTemp.toFixed(1)}Â°C`;
                    clearInterval(interval);
                }
            }, 1000 / frameRate);
        }

        function updateTemperatureColor(element, temp) {
            let gradient;
            if (temp <= 26) {
                gradient = 'linear-gradient(135deg, rgba(59, 130, 246, 0.8) 0%, rgba(96, 165, 250, 0.8) 100%)';
            } else if (temp < 30) {
                gradient = 'linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(52, 211, 153, 0.2) 100%)';
            } else if (temp < 30.5) {
                gradient = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(251, 191, 36, 0.2) 100%)';
            } else {
                gradient = 'linear-gradient(135deg, rgba(239, 68, 68, 0.8) 0%, rgba(248, 113, 113, 0.8) 100%)';
            }
            element.style.background = gradient;
        }
        
        // ==============================================
        // íƒ­ 3 (ì›ë³¸ ì¬ë£Œ) ìŠ¤í¬ë¦½íŠ¸ (Roh.htmlì—ì„œ ê°€ì ¸ì˜´)
        // ==============================================
        
        // íƒ­ 3ìš© CSV íŒŒì„œ (Roh.htmlì˜ íŒŒì„œ)
        function mat_parseCSV(csvText) {
            const lines = csvText.trim().replace(/\r/g, "").split('\n');
            const firstLine = lines[0].toLowerCase();
            const hasHeader = firstLine.includes('time') || firstLine.includes('h') || firstLine.includes('t');
            const startIndex = hasHeader ? 1 : 0;
            
            const data = lines.slice(startIndex).map(line => {
                const values = line.split(',');
                if (values.length >= 3) {
                    return {
                        'ì‹œê°„': values[0] ? values[0].trim() : '',
                        'ìŠµë„': values[1] ? values[1].trim() : '',
                        'ì˜¨ë„': values[2] ? values[2].trim() : ''
                    };
                }
                return null;
            }).filter(row => row && row['ì‹œê°„'] && row['ì˜¨ë„'] && row['ìŠµë„']);

            return { data, headers: ['ì‹œê°„', 'ì˜¨ë„', 'ìŠµë„'] };
        }

        // íƒ­ 3ìš© í‰ê·  ê³„ì‚°
        function mat_calculateAverage(data, key) {
            const values = data.map(row => parseFloat(row[key])).filter(v => !isNaN(v));
            return values.length > 0 ? values.reduce((a, b) => a + b, 0) / values.length : 0;
        }
        
        // íƒ­ 3ìš© ë°ì´í„° ê¸¸ì´ ë§ì¶”ê¸°
        function mat_stretchData(sourceArray, targetLength) {
            if (!sourceArray || sourceArray.length === 0) {
                return new Array(targetLength).fill(null);
            }
            if (sourceArray.length === targetLength) {
                return sourceArray;
            }

            const stretched = new Array(targetLength);
            const sourceLength = sourceArray.length;
            const scaleFactor = (sourceLength - 1) / (targetLength - 1);

            for (let i = 0; i < targetLength; i++) {
                const sourceIndexFloat = i * scaleFactor;
                const index1 = Math.floor(sourceIndexFloat);
                const index2 = Math.ceil(sourceIndexFloat);
                const fraction = sourceIndexFloat - index1;

                if (index1 >= sourceLength - 1) {
                    stretched[i] = sourceArray[sourceLength - 1];
                    continue;
                }

                if (index1 === index2) {
                    stretched[i] = sourceArray[index1];
                } else {
                    const val1 = sourceArray[index1];
                    const val2 = sourceArray[index2];
                    stretched[i] = val1 + (val2 - val1) * fraction;
                }
            }
            return stretched;
        }

        // íƒ­ 3ìš© ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function mat_updateCharts() {
            const selectedData = [];
            
            for (let i = 1; i <= 4; i++) {
                // 'mat_data' IDì—ì„œ ì½ì–´ì˜´
                const selectValue = document.getElementById(`mat_data${i}Select`).value;
                if (selectValue && mat_parsedDataLibrary[selectValue]) {
                    selectedData.push({
                        key: selectValue,
                        data: mat_parsedDataLibrary[selectValue]
                    });
                }
            }
            
            // 'mat_' í•¨ìˆ˜ë“¤ í˜¸ì¶œ
            mat_updateStatsTable(selectedData);
            mat_renderCharts(selectedData);
        }

        // íƒ­ 3ìš© í†µê³„ í…Œì´ë¸”
        function mat_updateStatsTable(selectedData) {
            // 'mat_statsTable' IDì— ì”€
            const statsTable = document.getElementById('mat_statsTable');
            const statsContent = statsTable.querySelector('.stats-content');
            
            if (selectedData.length === 0) {
                statsTable.style.display = 'none';
                return;
            }

            statsTable.style.display = 'block';

            let tableHTML = '<table><thead><tr><th>ë°ì´í„°</th><th>í‰ê·  ì˜¨ë„ (Â°C)</th><th>í‰ê·  ìŠµë„ (%)</th></tr></thead><tbody>';
            
            selectedData.forEach(item => {
                const avgTemp = mat_calculateAverage(item.data.data, 'ì˜¨ë„');
                const avgHumidity = mat_calculateAverage(item.data.data, 'ìŠµë„');
                tableHTML += `
                    <tr>
                        <td><strong>${mat_dataNames[item.key]}</strong></td>
                        <td>${avgTemp.toFixed(2)}</td>
                        <td>${avgHumidity.toFixed(2)}</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            statsContent.innerHTML = tableHTML;
        }

        // íƒ­ 3ìš© ì°¨íŠ¸ ë Œë”ë§
        function mat_renderCharts(selectedData) {
            // 'mat_chartsContainer' IDì— ì”€
            const chartsContainer = document.getElementById('mat_chartsContainer');
            
            mat_csvChartInstances.forEach(chart => chart.destroy());
            mat_csvChartInstances = [];

            chartsContainer.innerHTML = '';

            if (selectedData.length === 0) {
                return;
            }

            ['ì˜¨ë„', 'ìŠµë„'].forEach(metric => {
                mat_createChart(metric, selectedData);
            });
        }

        // íƒ­ 3ìš© ì°¨íŠ¸ ìƒì„±
        function mat_createChart(metric, selectedData) {
            const style = getComputedStyle(document.documentElement);
            const textSecondaryColor = style.getPropertyValue('--text-secondary').trim();
            const textPrimaryColor = style.getPropertyValue('--text-primary').trim();

            const container = document.createElement('div');
            container.className = 'chart-container';
            container.innerHTML = `<div class="chart-title">${metric === 'ì˜¨ë„' ? 'ğŸŒ¡ï¸' : 'ğŸ’§'} ${metric} ë¹„êµ</div>`;
            const canvas = document.createElement('canvas');
            container.appendChild(canvas);
            // 'mat_chartsContainer' IDì— ì¶”ê°€
            document.getElementById('mat_chartsContainer').appendChild(container);

            const maxDataLength = Math.max(...selectedData.map(item => 
                item.data.data.map(r => parseFloat(r[metric])).filter(v => !isNaN(v)).length
            ));

            const chartLabels = Array.from({ length: maxDataLength }, (_, i) => i + 1);

            const datasets = selectedData.map(item => {
                const values = item.data.data.map(r => parseFloat(r[metric])).filter(v => !isNaN(v));
                const stretchedValues = mat_stretchData(values, maxDataLength);
                const colors = mat_dataColors[item.key]; // 'mat_' ìƒ‰ìƒí‘œ ì‚¬ìš©

                return {
                    label: mat_dataNames[item.key], // 'mat_' ì´ë¦„í‘œ ì‚¬ìš©
                    data: stretchedValues,
                    borderColor: colors.border,
                    backgroundColor: colors.bg,
                    borderWidth: 2,
                    tension: 0.4,
                    pointRadius: 0,
                    fill: true
                };
            });

            const newChart = new Chart(canvas, {
                type: 'line',
                data: { labels: chartLabels, datasets: datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { 
                            ticks: { color: textSecondaryColor }, 
                            grid: { color: 'rgba(71, 85, 105, 0.3)' },
                            title: {
                                display: true,
                                text: 'ë°ì´í„° ìˆœì„œ',
                                color: textSecondaryColor
                            }
                        },
                        y: { 
                            ticks: { color: textSecondaryColor }, 
                            grid: { color: 'rgba(71, 85, 105, 0.3)' },
                            min: 0,
                            max: metric === 'ì˜¨ë„' ? 50 : 100 // ì¬ë£Œ íƒ­ì€ Yì¶• ìµœëŒ€ê°’ ë‹¤ë¦„
                        }
                    },
                    plugins: { 
                        legend: { 
                            labels: { color: textPrimaryColor } 
                        } 
                    }
                }
            });

            mat_csvChartInstances.push(newChart); // 'mat_' ì°¨íŠ¸ ë°°ì—´ì— ì¶”ê°€
        }


        // ==============================================
        // ê³µí†µ ê°¤ëŸ¬ë¦¬ ìŠ¤í¬ë¦½íŠ¸
        // ==============================================
        
        const galleryItems = Object.keys(simulatorData);
        let currentGalleryIndex = 0;

        document.querySelectorAll('.display-image').forEach(img => img.addEventListener('click', (e) => {
            const altText = e.target.alt;
            const index = galleryItems.indexOf(altText);
            if(index > -1) {
                currentGalleryIndex = index;
                openGallery();
            }
        }));

        function openGallery() {
            document.getElementById('imageGallery').style.display = 'flex';
            updateGalleryContent();
            document.addEventListener('keydown', handleGalleryKeydown);
        }

        function closeGallery() {
            document.getElementById('imageGallery').style.display = 'none';
            document.removeEventListener('keydown', handleGalleryKeydown);
        }

        function navigateGallery(direction) {
            currentGalleryIndex = (currentGalleryIndex + direction + galleryItems.length) % galleryItems.length;
            updateGalleryContent();
        }

        function updateGalleryContent() {
            const key = galleryItems[currentGalleryIndex];
            const data = simulatorData[key];
            document.getElementById('galleryImage').src = data.image;
            document.getElementById('galleryTitle').textContent = key.replace(/-/g, ' + ');
            document.getElementById('galleryTemp').textContent = `${data.temp.toFixed(1)}Â°C`;
        }
        
        function handleGalleryKeydown(e) {
            if (e.key === 'Escape') closeGallery();
            if (e.key === 'ArrowLeft') navigateGallery(-1);
            if (e.key === 'ArrowRight') navigateGallery(1);
        }

        // ==============================================
        // í˜ì´ì§€ ì´ˆê¸°í™”
        // ==============================================

        function initialize() {
            // íƒ­ 1 (ëª¨ë¸) ë°ì´í„° íŒŒì‹±
            for (const key in csvDataLibrary) {
                parsedDataLibrary[key] = parseCSV(csvDataLibrary[key]);
                parsedDataLibrary[key].fileName = dataNames[key];
            }
            
            // íƒ­ 3 (ì¬ë£Œ) ë°ì´í„° íŒŒì‹±
            for (const key in mat_csvDataLibrary) {
                mat_parsedDataLibrary[key] = mat_parseCSV(mat_csvDataLibrary[key]);
                mat_parsedDataLibrary[key].fileName = mat_dataNames[key];
            }
            
            // íƒ­ 1 ì´ˆê¸°í™”
            updatePanelContent(1, document.getElementById('data1Select').value);
            updatePanelContent(2, document.getElementById('data2Select').value);
            updatePanelContent(3, document.getElementById('data3Select').value);
            updateCharts();
            
            // íƒ­ 2 (ì‹œë®¬ë ˆì´í„°) ì´ˆê¸°í™”
            updateSimulator();

            // íƒ­ 3 (ì¬ë£Œ) ì´ˆê¸°í™”
            mat_updateCharts();
        }

        window.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>
